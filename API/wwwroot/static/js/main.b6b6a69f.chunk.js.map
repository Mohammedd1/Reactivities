{"version":3,"sources":["app/models/pagination.ts","app/api/agent.ts","app/models/activity.ts","app/models/profile.ts","app/stores/activityStore.ts","app/stores/userStore.ts","app/stores/profileStore.ts","app/stores/store.ts","app/stores/commonStore.ts","app/stores/modalStore.ts","app/stores/commentStore.ts","app/layout/NavBar.tsx","features/profiles/FollowButton.tsx","features/profiles/ProfileCard.tsx","features/activities/dashboard/ActivityListItemAttendee.tsx","features/activities/dashboard/ActivityListItem.tsx","features/activities/dashboard/ActivityList.tsx","features/activities/dashboard/ActivityFilters.tsx","features/activities/dashboard/ActivityListItemPlaceholder.tsx","features/activities/dashboard/ActivityDashboard.tsx","app/layout/LoadingComponent.tsx","app/common/form/MyTextInput.tsx","app/common/form/MyTextArea.tsx","app/common/form/MySelectInput.tsx","app/common/options/categoryOptions.ts","app/common/form/MyDateInput.tsx","features/activities/form/ActivityForm.tsx","features/users/LoginForm.tsx","features/errors/ValidationErrors.tsx","features/users/RegisterForm.tsx","features/home/HomePage.tsx","features/activities/details/ActivityDetailedSidebar.tsx","features/activities/details/ActivityDetailedHeader.tsx","features/activities/details/ActivityDetailedInfo.tsx","features/activities/details/ActivityDetailedChat.tsx","features/activities/details/ActivityDetails.tsx","features/errors/TestErrors.tsx","features/errors/NotFound.tsx","features/errors/ServerError.tsx","app/common/modals/ModalContainer.tsx","features/profiles/ProfileHeader.tsx","features/profiles/ProfileEditForm.tsx","features/profiles/ProfileAbout.tsx","app/common/imageUpload/PhotoWidgetDropzone.tsx","app/common/imageUpload/PhotoWidgetCropper.tsx","app/common/imageUpload/PhotoUploadWidget.tsx","features/profiles/ProfilePhotos.tsx","features/profiles/ProfileFollowings.tsx","features/profiles/ProfileActivities.tsx","features/profiles/ProfileContent.tsx","features/profiles/ProfilePage.tsx","app/layout/PrivateRoute.tsx","app/layout/App.tsx","reportWebVitals.ts","app/layout/ScrollToTop.tsx","index.tsx"],"names":["PaginatedResult","data","pagination","this","PagingParams","pageNumber","pageSize","axios","defaults","baseURL","process","interceptors","request","use","config","token","store","commonStore","headers","Authorization","response","a","JSON","parse","error","status","toast","method","errors","hasOwnProperty","history","push","modalStateErrors","key","flat","setServerError","Promise","reject","responseBody","requests","url","get","then","body","post","put","delete","agent","Activities","list","params","details","id","create","activity","update","attend","Account","current","login","user","register","fbLogin","accessToken","Profiles","username","uploadPhoto","file","formData","FormData","append","setMainPhoto","deletePhoto","updateProfile","profile","updateFollowing","listFollowings","predicate","listActivities","Activity","init","Object","assign","ActivityFormValues","undefined","title","category","description","date","city","venue","Profile","displayName","image","ActivityStore","activities","activityRegistry","Map","selectedActivity","editMode","loading","loadingInitial","pagingParams","set","setPagingParams","setPredicate","value","resetPredicate","forEach","loadActivities","axiosParams","result","setActivity","setPagination","setloadingInitial","console","log","loadActivity","getActivity","runInAction","userStore","isGoing","attendees","some","isHost","hostUsername","host","find","x","Date","state","createActivity","attendee","newActivity","updateActivity","updatedActivity","deleteActivity","updateAttendance","filter","cancelActivityToggle","isCancelled","clearSelectedActivity","updateAttendeeFollowing","following","followersCount","makeAutoObservable","reaction","keys","clear","URLSearchParams","toString","toISOString","Array","from","values","sort","b","getTime","entries","activitiesByDate","reduce","format","UserStore","fbAccessToken","fbLoading","creds","setToken","modalStore","closeModal","logout","window","localStorage","removeItem","getUser","setImage","setDisplayName","name","getFacebookLoginStatus","FB","getLoginStatus","authResponse","facebookLogin","apiLogin","catch","scope","ProfileStore","loadingProfile","uploading","followings","loadingFollowings","activeTab","userActivities","loadingActivities","setActiveTab","loadProfile","photo","photos","isMain","p","activityStore","followingCount","loadFollowings","loadUserActivities","getItem","appLoaded","setAppLoaded","setItem","modal","open","openModal","content","profileStore","commentStore","comments","hubConnection","createHubConnection","activityId","HubConnectionBuilder","withUrl","accessTokenFactory","withAutomaticReconnect","configureLogging","LogLevel","Information","build","start","on","comment","createdAt","unshift","stopHubConnection","stop","clearComments","addComment","invoke","StoreContext","createContext","useStore","useContext","observer","Menu","inverted","fixed","Container","Item","as","NavLink","to","exact","header","src","alt","style","marginRight","Button","positive","MenuItem","position","Image","avatar","spaced","Dropdown","pointing","text","Link","icon","onClick","Reveal","animated","Content","visible","width","fluid","color","hidden","basic","e","preventDefault","handleFollow","Card","Header","Description","str","length","substring","truncate","bio","extra","Icon","styles","borderColor","borderWidth","List","horizontal","map","Popup","hoverable","trigger","size","circular","bordered","ActivityListItem","Segment","Group","Label","attached","textAlign","marginBottom","secondary","clearing","floated","groupedActivities","group","sub","vertical","marginTop","active","has","onChange","ActivityListItemPlaceholder","Placeholder","minHeight","Line","Paragraph","disabled","useState","loadingNext","setLoadingNext","useEffect","Grid","Column","pageStart","loadMore","currentPage","hasMore","totalPages","initialLoad","Loader","LoadingComponent","Dimmer","MyTextInput","props","useField","field","meta","Form","Field","touched","label","MyTextArea","MySelectInput","helpers","Select","clearable","options","d","setValue","onBlur","setTouched","placeholder","categoryOptions","MyDatePicker","selected","useHistory","useParams","validationSchema","Yup","required","nullable","enableReinitialize","initialValues","onSubmit","uuid","handleFormSubmit","handleSubmit","isValid","isSubmitting","dirty","className","autoComplete","rows","placeholderText","showTimeSelect","timeCaption","dateFormat","type","email","password","setErrors","render","ValidationErrors","Message","err","i","isLoggedIn","Divider","border","relaxed","divided","ribbon","verticalAlign","Extra","activityImageStyle","activityImageTextStyle","bottom","left","height","padding","zIndex","top","resetForm","onKeyPress","shiftKey","Comment","Avatar","Author","Metadata","formatDistanceToNow","Text","whiteSpace","TestErrors","widths","baseUrl","primary","NotFound","Inline","message","Modal","onClose","Statistic","setEditMode","isCurrentUser","Tab","Pane","PhotoWidgetDropzone","setFiles","dzStyles","borderRadius","paddingTop","onDrop","useCallback","acceptedFiles","preview","URL","createObjectURL","useDropzone","getRootProps","getInputProps","isDragActive","PhotoWidgetCropper","imagePreview","setCropper","initialAspectRatio","aspectRatio","guides","viewMode","autoCropArea","background","onInitialized","cropper","PhotoUploadWidget","files","revokeObjectURL","overflow","getCroppedCanvas","toBlob","blob","addPhotoMode","setAddPhotoMode","target","setTarget","itemsPerRow","currentTarget","handleSetMainPhoto","handleDeletePhoto","panes","menuItem","pane","menu","onTabChange","activeIndex","handleTabChange","objectFit","Meta","menuPosition","PrivateRoute","Component","component","rest","location","useLocation","finally","hideProgressBar","path","HomePage","ActivityDashboard","ActivityDetails","ActivityForm","ProfilePage","ServerError","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ScrollToTop","pathname","scrollTo","createBrowserHistory","ReactDOM","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.b6b6a69f.chunk.js","sourcesContent":["//240\r\nexport interface Pagination {\r\n    currentPage: number;\r\n    itemsPerPage: number;\r\n    totalItems: number;\r\n    totalPages: number;\r\n}\r\n\r\nexport class PaginatedResult<T>{\r\n    data: T;\r\n    pagination: Pagination;\r\n\r\n    constructor(data: T, pagination: Pagination) {\r\n        this.data = data;\r\n        this.pagination = pagination;\r\n    }\r\n}\r\n\r\n//241\r\n//modified 242\r\nexport class PagingParams {\r\n    pageNumber;\r\n    pageSize;\r\n\r\n    constructor(pageNumber=1,pageSize=2){\r\n        this.pageNumber=pageNumber;\r\n        this.pageSize=pageSize;\r\n    }\r\n}","import axios, { AxiosError, AxiosResponse } from 'axios';\n// import { request } from 'http';\nimport { toast } from 'react-toastify';\nimport { history } from '../..';\nimport { Activity, ActivityFormValues } from '../models/activity';\nimport { store } from '../stores/store';\nimport { User, UserFormValues } from '../models/user';\nimport { Photo, Profile, UserActivity } from '../models/profile';\nimport { PaginatedResult } from '../models/pagination';\n\n\n\n//Method to add some sleep to show loading\nconst sleep = (delay: number) => {\n    return new Promise((resolve) => {\n        setTimeout(resolve, delay)\n    })\n}\n\n//modified 254 - after creating .env files\n//axios.defaults.baseURL = 'http://localhost:5000/api';\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\n\n//Sending up the token with request\naxios.interceptors.request.use(config => {\n    const token = store.commonStore.token;\n    if (token) config.headers.Authorization = `Bearer ${token}`\n    return config;\n})\n//axios feature, every time we recieve a response come from our api we can do something with the response.\naxios.interceptors.response.use(async response => {\n    // try {\n    //     await sleep(1000);\n    //     return response;\n    // }\n    // catch (error) {\n    //     console.log(error);\n    //     return await Promise.reject(error);\n    // }\n\n    //254\n    if (process.env.NODE_ENV === 'development') await sleep(1000);\n\n    //240\n    const pagination = response.headers['pagination'];\n    if (pagination) {\n        response.data = new PaginatedResult(response.data, JSON.parse(pagination));\n        return response as AxiosResponse<PaginatedResult<any>>;\n    }\n\n    return response;\n}, (error: AxiosError) => {\n    const { data, status, config } = error.response!;\n\n    switch (status) {\n        case 400:\n            //showing toastify notes label\n            //toast.error('bad request');\n            if (typeof data === 'string') {\n                toast.error(data);\n            }\n            if (config.method === 'get' && data.errors.hasOwnProperty('id')) {\n\n                history.push('/not-found');\n            }\n\n            if (data.errors) {\n                //variable to store the different errors\n                const modalStateErrors = [];\n                for (const key in data.errors) {\n                    if (data.errors[key]) {\n                        modalStateErrors.push(data.errors[key]);\n                    }\n                }\n                //flat:to flatten the array\n                throw modalStateErrors.flat();\n            }\n            // else{\n            //     toast.error(data);\n            // }\n            break;\n        case 401:\n            toast.error('unauthorzied');\n            break;\n        case 404:\n            //toast.error('not found');\n            //make sure you bring the history from  index.tsx\n            history.push('/not-found');\n            break;\n        case 500:\n            // toast.error('server error');\n            store.commonStore.setServerError(data);\n            history.push('/server-error');\n            break;\n    }\n    return Promise.reject(error);\n})\n// const responseBody = (response: AxiosResponse)=> response.data;\n//make response a generic type\nconst responseBody = <T>(response: AxiosResponse<T>) => response.data;\n\n//object to store a common requests we gonna to make against axios\nconst requests = {\n    //body:{} --> body with type object\n    // get: (url: string) => axios.get(url).then(responseBody),\n    // post: (url: string, body: {}) => axios.post(url, body).then(responseBody),\n    // put: (url: string, body: {}) => axios.put(url, body).then(responseBody),\n    // del: (url: string) => axios.delete(url).then(responseBody),\n\n    //Generic type\n    get: <T>(url: string) => axios.get<T>(url).then(responseBody),\n    post: <T>(url: string, body: {}) => axios.post<T>(url, body).then(responseBody),\n    put: <T>(url: string, body: {}) => axios.put<T>(url, body).then(responseBody),\n    del: <T>(url: string) => axios.delete<T>(url).then(responseBody),\n\n}\n\n//object to store a requests of our activities\nconst Activities = {\n    // list: () => requests.get('/activities')\n    //specifying the type\n    list: (params: URLSearchParams) => axios.get<PaginatedResult<Activity[]>>('/activities', { params })\n        .then(responseBody),//modified 240 //modified 241\n    details: (id: string) => requests.get<Activity>(`/activities/${id}`),\n    create: (activity: ActivityFormValues) => requests.post<void>('/activities', activity),\n    update: (activity: ActivityFormValues) => requests.put<void>(`/activities/${activity.id}`, activity),\n    delete: (id: string) => requests.del<void>(`/activities/${id}`),\n    attend: (id: string) => requests.post<void>(`/activities/${id}/attend`, {})\n}\n\nconst Account = {\n    current: () => requests.get<User>('/account'),\n    login: (user: UserFormValues) => requests.post<User>('/account/login', user),\n    register: (user: UserFormValues) => requests.post<User>('/account/register', user),\n    fbLogin:(accessToken:string)=>requests.post<User>(`/account/fbLogin?accessToken=${accessToken}`,{})//267\n}\n\n//195\nconst Profiles = {\n    get: (username: string) => requests.get<Profile>(`/profiles/${username}`),\n    //203\n    uploadPhoto: (file: Blob) => {\n        let formData = new FormData();\n        formData.append('File', file);\n        return axios.post<Photo>('photos', formData, {\n            headers: { 'Content-type': 'multipart/form-data' }\n        })\n    },\n    //204\n    setMainPhoto: (id: string) => requests.post(`/photos/${id}/setMain`, {}),\n    deletePhoto: (id: string) => requests.del(`/photos/${id}`),\n    updateProfile: (profile: Partial<Profile>) => requests.put(`/profiles`, profile),//207\n    updateFollowing: (username: string) => requests.post(`/follow/${username}`, {}),//230\n    listFollowings: (username: string, predicate: string) =>\n        requests.get<Profile[]>(`/follow/${username}?predicate=${predicate}`),//232\n    listActivities: (username: string, predicate: string) =>\n        requests.get<UserActivity[]>(`/profiles/${username}/activities?predicate=${predicate}`)//249\n\n}\n\nconst agent = {\n    Activities,\n    Account,\n    Profiles //195\n}\n\n//using this to access our activities request\nexport default agent;\n","\nimport { Profile } from \"./profile\";\n\nexport interface Activity {//no convenbtion to prefixing the interface name with I like we used to did in C#\n    id: string;\n    title: string;\n    date: Date | null;\n    //date: string;\n    description: string;\n    category: string;\n    city: string;\n    venue: string;\n    hostUsername: string;\n    isCancelled: boolean;\n    isGoing: boolean;\n    isHost: boolean;\n    host?: Profile;\n    attendees: Profile[]\n}\n\n//174\nexport class Activity implements Activity{\n    constructor(init?: ActivityFormValues){\n        Object.assign(this,init);\n    }\n}\n//class for activity form values(this will give us an opportunity to use a constructo to initialize certain values.)\nexport class ActivityFormValues {\n    id?: string = undefined;\n    title: string = '';\n    category: string = '';\n    description: string = '';\n    date: Date | null = null;\n    city: string = '';\n    venue: string = '';\n\n    //the constructor will take activity as a parameter, but it's going to be optional because we\n    //want to use this activity, form values for ever creating an activity or editing an existing activity.\n    constructor(activity?: ActivityFormValues) {\n        if(activity){\n            this.id=activity.id;\n            this.title=activity.title;\n            this.category=activity.category;\n            this.description=activity.description;\n            this.date=activity.date;\n            this.venue=activity.venue;\n            this.city=activity.city;\n\n        }\n\n    }\n}","import { User } from \"./user\";\n\nexport interface Profile {\n    username: string;\n    displayName: string;\n    image?: string;\n    bio?: string;\n    followersCount: number;//229\n    followingCount: number;//229\n    following: boolean;//229\n    photos?:Photo[];//195\n}\n\nexport class Profile implements Profile {\n    constructor(user: User) {\n        this.username = user.username;\n        this.displayName = user.displayName;\n        this.image = user.image;\n    }\n}\n\n//195\nexport interface Photo{\n    id:string;\n    url:string;\n    isMain:boolean;    \n}\n\n//249\nexport interface UserActivity {\n    id: string;\n    title: string;\n    category: string;\n    date: Date;\n    }","import { makeAutoObservable, reaction, runInAction } from \"mobx\";\nimport agent from \"../api/agent\";\nimport { Activity, ActivityFormValues } from \"../models/activity\";\n//import { v4 as uuid } from 'uuid';\n//import { runInNewContext } from \"vm\"; \n//import ActivityForm from \"../../features/activities/form/ActivityForm\";\nimport { format } from 'date-fns';\nimport { store } from \"./store\";\nimport { Profile } from \"../models/profile\";\nimport { Pagination, PagingParams } from \"../models/pagination\";\n\n\nexport default class ActivityStore {\n    //title = 'Hello from Mobx';\n    activities: Activity[] = [];\n    //javascript Map object\n    activityRegistry = new Map<string, Activity>();\n    selectedActivity: Activity | undefined = undefined;\n    editMode = false;\n    loading = false;\n    loadingInitial = false;//prevent never end loading when click on create activity\n    pagination: Pagination | null = null;//240\n    pagingParams = new PagingParams();//241\n    predicate = new Map().set('all', true);//245\n\n    constructor() {\n        // makeObservable(this, {\n        //     title: observable,\n        //     //we need to bind this action to the property title\n        //     //way 1\n        //     //setTitle:action.bound\n        //     //way2\n        //     setTitle:action\n\n        // })\n\n        //we don't need to specifiy the properties inside makeObservable method \n        makeAutoObservable(this);\n        //245\n        reaction(\n            () => this.predicate.keys(),\n            () => {\n                this.pagingParams = new PagingParams();\n                this.activityRegistry.clear();\n                this.loadActivities();\n            }\n        )\n\n    }\n\n    //241\n    setPagingParams = (pagingParams: PagingParams) => {\n        this.pagingParams = pagingParams;\n    }\n\n    //245\n    setPredicate = (predicate: string, value: string | Date) => {\n        const resetPredicate = () => {\n            this.predicate.forEach((value, key) => {\n                if (key !== 'startDate') this.predicate.delete(key);\n            })\n        }\n        switch (predicate) {\n            case 'all':\n                resetPredicate();\n                this.predicate.set('all', true);\n                break;\n            case 'isGoing':\n                resetPredicate();\n                this.predicate.set('isGoing', true);\n                break;\n            case 'isHost':\n                resetPredicate();\n                this.predicate.set('isHost', true);\n                break;\n            case 'startDate':\n                this.predicate.delete('startDate');\n                this.predicate.set('startDate', value);\n        }\n    }\n    //241\n    //a way to send query string parameters instead of make it direct as '?pageNumber=&PageSize='\n    // in the URL 'requests.get<PaginatedResult<Activity[]>>('/activities')'\n    get axiosParams() {\n        const params = new URLSearchParams();\n        params.append('pageNumber', this.pagingParams.pageNumber.toString());\n        params.append('pageSize', this.pagingParams.pageSize.toString());\n        //245\n        this.predicate.forEach((value, key) => {\n            if (key === 'startDate') {\n                params.append(key, (value as Date).toISOString())\n            }\n            else {\n                params.append(key, value);\n            }\n        })\n        return params;\n    }\n\n    //computed functions\n    //sort activities by date\n    get activitiesByDate() {\n        return Array.from(this.activityRegistry.values()).sort((a, b) =>\n            //Date.parse(a.date) - Date.parse(b.date));\n            a.date!.getTime() - b.date!.getTime());\n    }\n\n\n    //Group activities by date\n    get groupedActivities() {\n        //array of objects that has a key,value pairs\n        return Object.entries(\n            this.activitiesByDate.reduce((activities, activity) => {\n                // const date = activity.date;\n                //const date = activity.date!.toISOString().split('T')[0];\n                const date = format(activity.date!, 'dd MMM yyyy');\n                //So what we're checking for here is to see if we have a match for this activity on this date.\n                //activities[date] = activities[date] if they match then [...activities[date], activity]\n                activities[date] = activities[date] ? [...activities[date], activity] : [activity];\n                return activities;\n\n            }, {} as { [key: string]: Activity[] })//initial object to fix typing error,it tells us that each element implicitly has in any type\n            //because expression of type string cannot be used to index type activity.\n            //the key is the date and the value is an array of activity that are on  same date.\n        )\n    }\n\n    //Actions\n    //Action to update observer 'title'\n    //way 1\n    // setTitle(){\n    //     this.title=this.title+'!';\n    // }\n    //way 2\n    //automatically bind to property\n    //     setTitle=()=>{\n    //         this.title=this.title+'!';\n    //     }\n\n    //after refactoring the app using Mobx\n    loadActivities = async () => {\n        // this.setloadingInitial(true);\n        this.loadingInitial = true;\n        try {\n            //get activities from API\n            const result = await agent.Activities.list(this.axiosParams);//modified 240 //modified 241\n            //loop over these activities\n            //modified 240\n            result.data.forEach(activity => {\n                this.setActivity(activity);\n            })\n            this.setPagination(result.pagination);//240\n            this.setloadingInitial(false);\n        } catch (error) {\n            console.log(error);\n            this.setloadingInitial(false);\n\n        }\n    }\n\n    //240\n    setPagination = (pagination: Pagination) => {\n        this.pagination = pagination;\n    }\n\n    loadActivity = async (id: string) => {\n        let activity = this.getActivity(id);\n        if (activity) {\n            this.selectedActivity = activity;\n            return activity;\n        }\n        else {\n            this.loadingInitial = true;\n            try {\n                activity = await agent.Activities.details(id);\n                this.setActivity(activity);\n                runInAction(() => {\n                    this.selectedActivity = activity;\n                })\n\n                this.setloadingInitial(false);\n                return activity;\n            }\n            catch (error) {\n                console.log(error);\n                this.setloadingInitial(false);\n            }\n        }\n    }\n    //private helpwer methods\n    private setActivity = (activity: Activity) => {\n        const user = store.userStore.user;\n        if (user) {\n            activity.isGoing = activity.attendees!.some(\n                a => a.username === user.username\n            )\n            activity.isHost = activity.hostUsername === user.username;\n            activity.host = activity.attendees?.find(x => x.username === activity.hostUsername);\n        }\n\n        //activity.date = activity.date.split('T')[0];//split at T and get the first peice\n        activity.date = new Date(activity.date!);\n        //this.activities.push(activity);//mutating our states\n        this.activityRegistry.set(activity.id, activity);\n    }\n    private getActivity = (id: string) => {\n        return this.activityRegistry.get(id);\n    }\n    setloadingInitial = (state: boolean) => {\n        this.loadingInitial = state;\n    }\n\n    //we don't need the below methods\n    // selectActivity = (id: string) => {\n    //     //this.selectedActivity = this.activities.find(a => a.id === id);\n    //     this.selectedActivity = this.activityRegistry.get(id);\n\n    // }\n    // cancelSelectedActivity = () => {\n    //     this.selectedActivity = undefined;\n    // }\n    // openForm = (id?: string) => {\n    //     id ? this.selectActivity(id) : this.cancelSelectedActivity();\n    //     this.editMode = true;\n    // }\n    // closeForm = () => {\n    //     this.editMode = false;\n    // }\n\n    createActivity = async (activity: ActivityFormValues) => {\n        // this.loading = true;\n        //after using history to redirect after the submit, we will move the uuid from below and set itin ActivityForm.tsx\n        //activity.id = uuid();\n        const user = store.userStore.user;\n        const attendee = new Profile(user!);\n        try {\n            await agent.Activities.create(activity);\n            const newActivity = new Activity(activity);//174\n            newActivity.hostUsername = user!.username;//174\n            newActivity.attendees = [attendee];//174\n            this.setActivity(newActivity);//174\n            //update activity array inside our store\n            runInAction(() => {\n                //this.activities.push(activity);\n                //this.activityRegistry.set(activity.id, activity);\n                //this.selectedActivity = activity;\n                // this.editMode = false;\n                // this.loading = false;\n                this.selectedActivity = newActivity;//174\n            })\n        } catch (error) {\n            console.log(error);\n            // runInAction(() => {\n            //     this.loading = false;\n            // })\n        }\n    }\n    updateActivity = async (activity: ActivityFormValues) => {\n        // this.loading = true;\n        try {\n            await agent.Activities.update(activity);\n            runInAction(() => {\n                //this.activities = [...this.activities.filter(a => a.id !== activity.id), activity];\n                //this.activityRegistry.set(activity.id, activity);\n                //this.selectedActivity = activity;\n                // this.editMode = false;\n                // this.loading = false;\n\n                //174\n                if (activity.id) {\n                    let updatedActivity = { ...this.getActivity(activity.id), ...activity }\n                    this.activityRegistry.set(activity.id, updatedActivity as Activity);\n                    this.selectedActivity = updatedActivity as Activity;\n                }\n\n\n            })\n        }\n        catch (error) {\n            console.log(error);\n            runInAction(() => {\n                this.loading = false;\n            })\n        }\n\n    }\n    deleteActivity = async (id: string) => {\n        this.loading = true;\n        try {\n            await agent.Activities.delete(id);\n            runInAction(() => {\n                //this.activities = [...this.activities.filter(a => a.id !== id)];\n                this.activityRegistry.delete(id);\n                //when click on view the activity will appear on the right hand,then if we click on delete\n                //it will delete it form the list but it will still appear on the right hand,below code will disappear it \n                // if (this.selectedActivity?.id == id) this.cancelSelectedActivity();\n                this.loading = false;\n            })\n        }\n        catch (error) {\n            console.log(error);\n            runInAction(() => {\n                this.loading = false;\n            })\n        }\n\n    }\n    updateAttendance = async () => {\n        const user = store.userStore.user;\n        this.loading = true;\n        try {\n            await agent.Activities.attend(this.selectedActivity!.id);\n            runInAction(() => {\n                if (this.selectedActivity?.isGoing) {\n                    this.selectedActivity.attendees =\n                        this.selectedActivity.attendees?.filter(a => a.username !== user?.username);\n                    this.selectedActivity.isGoing = false;\n                }\n                else {\n                    const attendee = new Profile(user!);\n                    this.selectedActivity?.attendees?.push(attendee);\n                    this.selectedActivity!.isGoing = true;\n\n                }\n\n                this.activityRegistry.set(this.selectedActivity!.id, this.selectedActivity!)\n            })\n        } catch (error) {\n            console.log(error);\n        }\n        finally {\n            runInAction(() => this.loading = false);\n        }\n    }\n\n    //175\n    cancelActivityToggle = async () => {\n        this.loading = true;\n        try {\n            await agent.Activities.attend(this.selectedActivity!.id);\n            runInAction(() => {\n                this.selectedActivity!.isCancelled = !this.selectedActivity?.isCancelled;\n                this.activityRegistry.set(this.selectedActivity!.id, this.selectedActivity!);\n            })\n        } catch (error) {\n            console.log(error);\n        } finally {\n            runInAction(() => this.loading = false);\n        }\n\n    }\n    //219\n    clearSelectedActivity = () => {\n        this.selectedActivity = undefined;\n    }\n\n    //230\n    updateAttendeeFollowing = (username: string) => {\n        this.activityRegistry.forEach(activity => {\n            activity.attendees.forEach(attendee => {\n                if (attendee.username === username) {\n                    attendee.following ? attendee.followersCount-- : attendee.followersCount++;\n                    attendee.following = !attendee.following;\n                }\n            })\n        })\n    }\n}\n","import { makeAutoObservable, runInAction } from 'mobx';\nimport { User, UserFormValues } from '../models/user';\nimport agent from '../api/agent';\nimport { store } from './store';\nimport { history } from '../..';\nimport { access } from 'fs';\n\nexport default class UserStore {\n    user: User | null = null;\n    fbAccessToken: string | null = null;//270\n    fbLoading = false;//270\n\n    constructor() {\n        makeAutoObservable(this)\n    }\n    get isLoggedIn() {\n        return !!this.user //cast the user object into boolean\n    }\n\n    login = async (creds: UserFormValues) => {\n        try {\n            const user = await agent.Account.login(creds);\n            //set the token\n            store.commonStore.setToken(user.token);\n            // if we want to modify unobservable, then it has to be inside an action.\n            runInAction(() => this.user = user);\n            //push the user into a new location after successfully logged in \n            history.push('/activities');\n            //close login modal\n            store.modalStore.closeModal();\n        }\n        catch (error) {\n            throw error;\n        }\n\n    }\n    logout = () => {\n        store.commonStore.setToken(null);\n        window.localStorage.removeItem('jwt');\n        this.user = null;\n        history.push('/');\n    }\n    //Persisting token\n    getUser = async () => {\n        try {\n            const user = await agent.Account.current();\n            runInAction(() => this.user = user);\n        } catch (error) {\n\n        }\n    }\n\n    register = async (creds: UserFormValues) => {\n        try {\n            const user = await agent.Account.register(creds);\n            //set the token\n            store.commonStore.setToken(user.token);\n            // if we want to modify unobservable, then it has to be inside an action.\n            runInAction(() => this.user = user);\n            //push the user into a new location after successfully logged in \n            history.push('/activities');\n            //close login modal\n            store.modalStore.closeModal();\n        }\n        catch (error) {\n            throw error;\n        }\n\n    }\n    //203\n    setImage = (image: string) => {\n        if (this.user) this.user.image = image;\n    }\n    //207\n    setDisplayName = (name: string) => {\n        if (this.user) this.user.displayName = name;\n    }\n    //270\n    getFacebookLoginStatus = async () => {\n        window.FB.getLoginStatus(response => {\n            if (response.status === 'connected') {\n                this.fbAccessToken = response.authResponse.accessToken;\n            }\n        })\n    }\n\n    //267\n    facebookLogin = () => {\n        //modified 270\n        this.fbLoading = true;\n        const apiLogin = (accessToken: string) => {\n            agent.Account.fbLogin(accessToken).then(user => {\n                store.commonStore.setToken(user.token);\n                runInAction(() => {\n                    this.user = user;\n                    this.fbLoading = false;\n                })\n                history.push('/activities');\n            }).catch(error => {\n                console.log(error);\n                runInAction(() => this.fbLoading = false);\n            })\n        }\n        if (this.fbAccessToken) {\n            apiLogin(this.fbAccessToken);\n        }\n        else {\n            window.FB.login(response => {\n                apiLogin(response.authResponse.accessToken);\n\n            }, { scope: 'public_profile,email' })\n        }\n\n        // window.FB.login(response => {\n        //     agent.Account.fbLogin(response.authResponse.accessToken).then(user => console.log(user));//269\n        // }, { scope: 'public_profile,email' })\n    }\n}","//195\nimport { makeAutoObservable, reaction, runInAction } from 'mobx';\nimport { Photo, Profile, UserActivity } from '../models/profile';\nimport agent from '../api/agent';\nimport { store } from './store';\n\n\nexport default class ProfileStore {\n    profile: Profile | null = null;\n    loadingProfile = false;\n    uploading = false;//203\n    loading = false;//204\n    followings: Profile[] = [];//230\n    loadingFollowings = false;//232 - if we initialize the variable we don't need to specifiy the type\n    activeTab = 0;//233\n    userActivities: UserActivity[] = [];//249\n    loadingActivities = false;//249\n\n    constructor() {\n        makeAutoObservable(this);\n\n        //233\n        reaction(\n            () => this.activeTab,\n            activeTab => {\n                if (activeTab === 3 || activeTab === 4) {\n                    const predicate = activeTab === 3 ? 'followers' : 'following';\n                    this.loadFollowings(predicate);\n                }\n                else {\n                    this.followings = [];\n                }\n            }\n        )\n    }\n    //233\n    setActiveTab = (activeTab: any) => {\n        this.activeTab = activeTab;\n    }\n\n    //198\n    get isCurrentUser() {\n        if (store.userStore.user && this.profile) {\n            return store.userStore.user.username === this.profile.username;\n        }\n        return false;\n    }\n    loadProfile = async (username: string) => {\n        this.loadingProfile = true;\n        try {\n            const profile = await agent.Profiles.get(username);\n            runInAction(() => {\n                this.profile = profile;\n                this.loadingProfile = false;\n            })\n        } catch (error) {\n            console.log(error);\n            runInAction(() => this.loadingProfile = false)\n        }\n\n    }\n\n    //203\n    uploadPhoto = async (file: Blob) => {\n        this.uploading = true;\n        try {\n            const response = await agent.Profiles.uploadPhoto(file);\n            const photo = response.data;\n\n            runInAction(() => {\n                if (this.profile) {\n                    this.profile.photos?.push(photo);\n                    if (photo.isMain && store.userStore.user) {\n                        store.userStore.setImage(photo.url);\n                        this.profile.image = photo.url;\n                    }\n                }\n                this.uploading = false;\n            })\n\n        }\n        catch (error) {\n            console.log(error);\n            runInAction(() => this.uploading = false);\n        }\n    }\n    //204\n    setMainPhoto = async (photo: Photo) => {\n        this.loading = true;\n        try {\n            await agent.Profiles.setMainPhoto(photo.id);\n            store.userStore.setImage(photo.url);\n            runInAction(() => {\n                if (this.profile && this.profile.photos) {\n                    this.profile.photos.find(p => p.isMain)!.isMain = false;//make the current main photo as not main\n                    this.profile.photos.find(p => p.id === photo.id)!.isMain = true;//make the new photo as main photo\n                    this.profile.image = photo.url;\n                    this.loading = false;\n                }\n            })\n\n        }\n        catch (error) {\n            runInAction(() => this.loading = false);\n            console.log(error);\n\n        }\n\n    }\n    //205\n    deletePhoto = async (photo: Photo) => {\n        this.loading = true;\n        try {\n            await agent.Profiles.deletePhoto(photo.id);\n            runInAction(() => {\n                if (this.profile) {\n                    this.profile.photos = this.profile.photos?.filter(p => p.id !== photo.id);\n                    this.loading = false;\n                }\n            })\n\n        }\n        catch (error) {\n            runInAction(() => this.loading = false);\n            console.log(error);\n        }\n    }\n    //207\n    updateProfile = async (profile: Partial<Profile>) => {\n        this.loading = true;\n        try {\n            await agent.Profiles.updateProfile(profile);\n            runInAction(() => {\n                if (profile.displayName && profile.displayName !==\n                    store.userStore.user?.displayName) {\n                    store.userStore.setDisplayName(profile.displayName);\n                }\n                this.profile = { ...this.profile, ...profile as Profile };\n                this.loading = false;\n            })\n        } catch (error) {\n            console.log(error);\n            runInAction(() => this.loading = false);\n        }\n    }\n\n    //230\n    updateFollowing = async (username: string, following: boolean) => {\n        this.loading = true;\n        try {\n            await agent.Profiles.updateFollowing(username);\n            store.activityStore.updateAttendeeFollowing(username);\n            runInAction(() => {\n                if (this.profile && this.profile.username !== store.userStore.user?.username && this.profile.username === username/*modified 233*/) {\n                    following ? this.profile.followersCount++ : this.profile.followersCount--;\n                    this.profile.following = !this.profile.following;\n                }\n\n                //233\n                if (this.profile && this.profile.username === store.userStore.user?.username) {\n                    following ? this.profile.followingCount++ : this.profile.followingCount--;\n                }\n\n                this.followings.forEach(profile => {\n                    if (profile.username === username) {\n                        profile.following ? profile.followersCount-- : profile.followersCount++;\n                        profile.following = !profile.following;\n                    }\n                })\n                this.loading = false;\n            })\n\n        }\n        catch (error) {\n            console.log(error);\n            runInAction(() => this.loading = false);\n        }\n    }\n    //232\n    loadFollowings = async (predicate: string) => {\n        this.loadingFollowings = true;\n        try {\n            const followings = await agent.Profiles.listFollowings(this.profile!.username, predicate);\n            runInAction(() => {\n                this.followings = followings;\n                this.loadingFollowings = false;\n            })\n        }\n        catch (error) {\n            console.log(error);\n            runInAction(() => this.loadingFollowings = false);\n        }\n    }\n    //249\n    loadUserActivities = async (username: string, predicate?: string) => {\n        this.loadingActivities = true;\n        try {\n            const activities = await agent.Profiles.listActivities(username,\n                predicate!);\n            runInAction(() => {\n                this.userActivities = activities;\n                this.loadingActivities = false;\n            })\n        } catch (error) {\n            console.log(error);\n            runInAction(() => {\n                this.loadingActivities = false;\n            })\n        }\n    }\n}","\nimport { createContext, useContext } from 'react';\nimport ActivityStore from './activityStore';\nimport CommonStore from './commonStore';\nimport UserStore from './userStore';\nimport ModalStore from './modalStore';\nimport ProfileStore from './profileStore';\nimport CommentStore from './commentStore';\n\ninterface Store {\n    activityStore: ActivityStore//class can be use also as types\n    commonStore: CommonStore;\n    userStore: UserStore;\n    modalStore:ModalStore;\n    profileStore: ProfileStore;//195\n    commentStore:CommentStore;//215\n\n}\n\nexport const store: Store = {\n    activityStore: new ActivityStore(),\n    commonStore: new CommonStore(),\n    userStore: new UserStore(),\n    modalStore:new ModalStore(),\n    profileStore: new ProfileStore(),//195\n    commentStore:new CommentStore()//215\n}\n\n//react context for the above,we use it in index.tsx file\nexport const StoreContext = createContext(store);\n\n//create simple react hook that allow us just to use our store inside our components.\n//we use it in App.tsx\nexport function useStore() {\n    return useContext(StoreContext);\n\n}","import { ServerError } from \"../models/serverError\";\nimport { makeAutoObservable, reaction } from 'mobx';\n\nexport default class CommonStore {\n    error: ServerError | null = null;\n    //store token upon login\n    // token: string | null = null;\n    //Persisting token\n    token: string | null = window.localStorage.getItem('jwt');\n    appLoaded = false;\n\n    constructor() {\n        makeAutoObservable(this);\n\n        //Persisting token\n        //reaction will only runs when this.token changed\n        reaction(\n            () => this.token,\n            token => {\n                if (token) {\n                    window.localStorage.setItem('jwt', token)\n                }\n                else {\n                    window.localStorage.removeItem('jwt')\n                }\n            }\n\n        )\n    }\n    setServerError = (error: ServerError) => {\n        this.error = error;\n    }\n    setToken = (token: string | null) => {\n        // if (token) window.localStorage.setItem('jwt', token);\n        // this.token = token;\n        //Persisting token\n        //we don't need to if(token) .. here because reaction() will handle this\n        this.token = token;\n    }\n    setAppLoaded = () => {\n        this.appLoaded = true;\n    }\n}\n\n","import { makeAutoObservable } from \"mobx\";\n\ninterface Modal {\n    open: boolean;\n    body: JSX.Element | null;\n}\n\nexport default class ModalStore {\n    modal: Modal = {\n        open: false,\n        body: null\n    }\n\n    constructor() {\n        makeAutoObservable(this)\n    }\n\n    openModal = (content: JSX.Element) => {\n        this.modal.open = true;\n        this.modal.body = content;\n    }\n    \n    closeModal = () => {\n        this.modal.open = false;\n        this.modal.body = null;\n    }\n}","//215\nimport { HubConnection, HubConnectionBuilder, LogLevel } from '@microsoft/signalr';\nimport { makeAutoObservable, runInAction } from 'mobx';\nimport { ChatComment } from '../models/comment';\nimport { store } from './store';\n\nexport default class CommentStore {\n    comments: ChatComment[] = [];\n    hubConnection: HubConnection | null = null;\n\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    createHubConnection = (activityId: string) => {\n        if (store.activityStore.selectedActivity) {\n            this.hubConnection = new HubConnectionBuilder()\n                // .withUrl('http://localhost:5000/chat?activityId=' + activityId, { - modfied 254\n                .withUrl(process.env.REACT_aPP_CHAT_URL + '?activityId=' + activityId, {\n                    accessTokenFactory: () => store.userStore.user?.token!\n                })\n                .withAutomaticReconnect()\n                .configureLogging(LogLevel.Information)\n                .build();\n\n            this.hubConnection.start().catch(error => console.log('Error establishing the connection: ', error));\n\n            //LoadComments should be the same name we put in ChatHub.cs file\n            this.hubConnection.on('LoadComments', (comments: ChatComment[]) => {\n                runInAction(() => {\n                    //219\n                    comments.forEach(comment => {\n                        comment.createdAt = new Date(comment.createdAt + 'Z');\n                    })\n                    this.comments = comments\n                });\n            })\n            //ReceiveComment should be the same name we put in ChatHub.cs file\n            this.hubConnection.on('ReceiveComment', (comment: ChatComment) => {\n                runInAction(() => {\n                    //219\n                    comment.createdAt = new Date(comment.createdAt);\n                    this.comments.unshift(comment);//modified 219\n                });\n            })\n        }\n    }\n    stopHubConnection = () => {\n        this.hubConnection?.stop().catch(error => console.log('Error stopping connection: ', error));\n    }\n\n    clearComments = () => {\n        this.comments = [];\n        this.stopHubConnection();\n    }\n    //217\n    addComment = async (values: any) => {\n        values.activityId = store.activityStore.selectedActivity?.id;\n        try {\n            //SendComment same method name in ChatHub.cs file\n            await this.hubConnection?.invoke('SendComment', values);\n        }\n        catch (error) {\n            console.log(error);\n        }\n    }\n\n}","//import React from 'react';//all react compnents imported from react,react components are react function that returns jsx\nimport { observer } from 'mobx-react-lite';\nimport { Link, NavLink } from 'react-router-dom';\nimport { Button, Container, Menu, MenuItem, Image, Dropdown } from 'semantic-ui-react';\nimport { useStore } from '../stores/store';\n//import { useStore } from '../stores/store';\n\n//We would need to make this an observer as well, because we need to know if the user object has been\n//updated in our store.\nexport default observer(function NavBar() {\n    //const{activityStore}=useStore();\n    const { userStore: { user, logout } } = useStore();\n    // return in the below will return a jsx \n    return (\n        <Menu inverted fixed='top'>\n            {/* Container will adding some padding inside the nav bar */}\n            <Container>\n                <Menu.Item as={NavLink} to='/' exact header>\n                    <img src='/assets/logo.png' alt='logo' style={{ marginRight: '10px' }} />\n                    Reactivities\n                </Menu.Item>\n                <Menu.Item as={NavLink} to='/activities' name='Activities' />\n                <Menu.Item as={NavLink} to='/errors' name='Errors' />\n                <Menu.Item>\n                    {/* <Button onClick={()=>activityStore.openForm()} positive content='Create Activity'/>//positive=green button */}\n                    <Button as={NavLink} to='/createActivity' positive content='Create Activity' />\n                </Menu.Item>\n                <MenuItem position='right'>\n                    <Image src={user?.image || '/assets/user.png'} avatar spaced='right' />\n                    <Dropdown pointing='top left' text={user?.displayName}>\n                        <Dropdown.Menu>\n                            <Dropdown.Item as={Link} to={`/profiles/${user?.username}`}\n                             text='My Profile' icon='user' />\n                            <Dropdown.Item onClick={logout} text='Logout' icon='power' />\n                        </Dropdown.Menu>\n                    </Dropdown>\n                </MenuItem>\n            </Container>\n        </Menu>\n    )\n})","//231\nimport React, { SyntheticEvent } from 'react';\nimport { Profile } from '../../app/models/profile';\nimport { observer } from 'mobx-react-lite';\nimport { Button, Reveal } from 'semantic-ui-react';\nimport { useStore } from \"../../app/stores/store\";\n\ninterface Props {\n    profile: Profile;\n}\n\nexport default observer(function FollowButton({ profile }: Props) {\n    const { profileStore, userStore } = useStore();\n    const { updateFollowing, loading } = profileStore;\n\n    if (userStore.user?.username === profile.username) return null;\n\n    function handleFollow(e: SyntheticEvent, username: string) {\n        //username which we want to follow or unfollow\n        e.preventDefault();\n        profile.following ? updateFollowing(username, false) : updateFollowing(username, true);\n    }\n\n    return (\n        <Reveal animated='move'>\n            <Reveal.Content visible style={{ width: '100%' }}>\n                <Button\n                    fluid\n                    color='teal'\n                    content={profile.following ? 'Following' : 'Not Following'} />\n            </Reveal.Content>\n            <Reveal.Content hidden style={{ width: '100%' }}>\n                <Button\n                    fluid\n                    basic\n                    color={profile.following  ? 'red' : 'green'}\n                    content={profile.following ? 'Unfollow' : 'Follow'}\n                    loading={loading}\n                    onClick={(e) => handleFollow(e,profile.username)}\n                />\n            </Reveal.Content>\n        </Reveal>\n    )\n})","//176\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Card, Icon, Image } from 'semantic-ui-react';\nimport { Profile } from '../../app/models/profile';\nimport FollowButton from './FollowButton';\n\ninterface Props {\n    profile: Profile;\n}\n\nexport default observer(function ProfileCard({ profile }: Props) {\n\n    //207\n    //truncate function to restrict the amount of text displayed in\n    //the attendee profile cards\n    function truncate(str: string | undefined) {\n        if (str) {\n            return str.length > 40 ? str.substring(0, 37) + '...' : str;\n        }\n    }\n\n    return (\n        <Card as={Link} to={`/profiles/${profile.username}`}>\n            <Image src={profile.image || '/assets/user.png'} />\n            <Card.Content>\n                <Card.Header>{profile.displayName}</Card.Header>\n                <Card.Description>{truncate(profile.bio)/*207*/}</Card.Description>\n            </Card.Content>\n            <Card.Content extra>\n                <Icon name='user' />\n                {profile.followersCount /*229*/} followers\n            </Card.Content>\n            <FollowButton profile={profile} />{/*231*/}\n        </Card>\n    )\n\n})\n\n\n\n","import { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Image, List, Popup } from 'semantic-ui-react';\nimport { Profile } from '../../../app/models/profile';\nimport ProfileCard from '../../profiles/ProfileCard';\n\ninterface Props {\n    attendees: Profile[];\n}\nexport default observer(function ActivityListItemAttendee({ attendees }: Props) {\n    //229\n    const styles = {\n        borderColor: 'orange',\n        borderWidth: 3\n    }\n    return (\n\n        <List horizontal>\n            {attendees.map(attendee => (\n                <Popup\n                    //176\n                    hoverable\n                    key={attendee.username}\n                    trigger={\n                        <List.Item key={attendee.username} as={Link} to={`/profiles/${attendee.username}`}>\n                            <Image\n                                size='mini'\n                                circular\n                                src={attendee.image || '/assets/user.png'}\n                                bordered\n                                style={attendee.following ? styles : null}\n                            />\n                        </List.Item>\n                    }\n                >\n                    <Popup.Content>\n                        <ProfileCard profile={attendee} />\n                    </Popup.Content>\n                </Popup>\n\n\n            ))}\n        </List>\n    )\n})","import { Button, Icon, Item, Label, Segment } from 'semantic-ui-react'\nimport { Activity } from '../../../app/models/activity';\nimport { Link } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport ActivityListItemAttendee from './ActivityListItemAttendee';\ninterface Props {\n    activity: Activity\n}\n\nexport default function ActivityListItem({ activity }: Props) {\n\n    return (\n\n        //Styliing the list item\n        <Segment.Group>\n            <Segment>\n                {\n                    activity.isCancelled &&\n                    <Label attached='top' color='red' content='Cancelled' style={{ textAlign: 'center' }} />\n                }\n                <Item.Group>\n                    <Item>\n                        <Item.Image style={{ marginBottom: 3 }} size='tiny' circular src={activity.host?.image || '/assets/user.png'} />\n                        <Item.Content>\n                            <Item.Header as={Link} to={`/activities/${activity.id}`}>\n                                {activity.title}\n                            </Item.Header>\n                            <Item.Description>Hosted by <Link to={`/profiles/${activity.hostUsername}`}>{activity.host?.displayName}</Link></Item.Description>\n                            {activity.isHost && (\n                                <Item.Description>\n                                    <Label basic color='orange'>\n                                        You are hosting this activity\n                                    </Label>\n                                </Item.Description>\n\n                            )}\n                            {activity.isGoing && !activity.isHost && (\n                                <Item.Description>\n                                    <Label basic color='green'>\n                                        You are going to this activity\n                                    </Label>\n                                </Item.Description>\n\n                            )}\n                        </Item.Content>\n\n                    </Item>\n                </Item.Group>\n            </Segment>\n            <Segment>\n                <span>\n                    {/* if the activity could be null so that why we add ! here and in evrywhere in the code*/}\n                    <Icon name='clock' />{format(activity.date!, 'dd MMM yyyy h:mm aa')}\n                    <Icon name='marker' />{activity.venue}\n                </span>\n            </Segment>\n            <Segment secondary>\n                <ActivityListItemAttendee attendees={activity.attendees!} />\n            </Segment>\n            {/* since we are using the floated in button,the button is on the edge to fix this we add clearning to the segment  */}\n            <Segment clearing>\n                <span>{activity.description}</span>\n                <Button\n                    as={Link}\n                    to={`/activities/${activity.id}`}\n                    color='teal'\n                    floated='right'\n                    content='View' />\n            </Segment>\n        </Segment.Group>\n    )\n}","//our Activity Dashboard is goning to be a react component,so we need to\nimport { observer } from 'mobx-react-lite';\nimport { Fragment } from 'react';\nimport { Header } from 'semantic-ui-react'\n// import { Activity } from '../../../app/models/activity'\nimport { useStore } from '../../../app/stores/store';\nimport ActivityListItem from '../dashboard/ActivityListItem'\n//specify an interface for properties,this will be standard for any component we create.\n// interface Props {\n//     activities: Activity[];\n//     // selectActivity: (id: string) => void;\n//     //deleteActivity: (id: string) => void;\n//     submitting: boolean;\n// }\n\nexport default observer(function ActivityList() {\n    const { activityStore } = useStore();\n    //const {activitiesByDate}=activityStore;\n    const { groupedActivities } = activityStore;\n    //handle loading spinner on the click of specific delete button\n    // const [target, setTarget] = useState('');//will contains the button name\n    // function handleActivityDelete(e: SyntheticEvent<HTMLButtonElement>, id: string) {\n    //     setTarget(e.currentTarget.name);\n    //     deleteActivity(id);\n    // }\n\n\n    return (\n        <>\n            {groupedActivities.map(([group, activities]) => (\n                <Fragment key={group}>\n                    <Header sub color='teal'>\n                        {group}\n                    </Header>\n                    {\n                        activities.map(activity => (\n                            <ActivityListItem key={activity.id} activity={activity} />\n                        ))}\n                </Fragment>\n            ))}\n        </>\n\n    )\n})","import React from 'react';\nimport { Header, Menu } from 'semantic-ui-react';\nimport Calendar from 'react-calendar';\nimport { observer } from 'mobx-react-lite';\nimport { useStore } from '../../../app/stores/store';\n\n//modified 246\nexport default observer(function ActivityFilters() {\n\n    const { activityStore: { predicate, setPredicate } } = useStore();\n\n    return (\n        <>\n            <Menu vertical size='large' style={{ width: '100%', marginTop: 25 }}>\n                <Header icon='filter' attached color='teal' content='Filters' />\n                <Menu.Item\n                    content='All Activities'\n                    active={predicate.has('all')}\n                    onClick={() => setPredicate('all', 'true')}\n                />\n                <Menu.Item\n                    content=\"I'm going\"\n                    active={predicate.has('isGoing')}\n                    onClick={() => setPredicate('isGoing', 'true')}\n                />\n                <Menu.Item\n                    content=\"I'm hosting\"\n                    active={predicate.has('isHost')}\n                    onClick={() => setPredicate('isHost', 'true')}\n                />\n            </Menu>\n            <Header />\n            <Calendar\n                onChange={(date:any) => setPredicate('startDate', date as Date)}\n                value={predicate.get('startDate') || new Date()}\n            />\n        </>\n    )\n})","//247 -this code was copied from \\Resources\\Section1 - Introduction\\StudentAssets\\snippets -->ActivityListItemPlaceholder.txt\r\n//check also https://semantic-ui.com/elements/placeholder.html\r\nimport React, { Fragment } from 'react';\r\nimport { Segment, Button, Placeholder } from 'semantic-ui-react';\r\n\r\nexport default function ActivityListItemPlaceholder() {\r\n    return (\r\n        <Fragment>\r\n            <Placeholder fluid style={{ marginTop: 25 }}>\r\n                <Segment.Group>\r\n                    <Segment style={{ minHeight: 110 }}>\r\n                        <Placeholder>\r\n                            <Placeholder.Header image>\r\n                                <Placeholder.Line />\r\n                                <Placeholder.Line />\r\n                            </Placeholder.Header>\r\n                            <Placeholder.Paragraph>\r\n                                <Placeholder.Line />\r\n                            </Placeholder.Paragraph>\r\n                        </Placeholder>\r\n                    </Segment>\r\n                    <Segment>\r\n                        <Placeholder>\r\n                            <Placeholder.Line />\r\n                            <Placeholder.Line />\r\n                        </Placeholder>\r\n                    </Segment>\r\n                    <Segment secondary style={{ minHeight: 70 }} />\r\n                    <Segment clearing>\r\n                        <Button disabled color='blue' floated='right' content='View' />\r\n                    </Segment>\r\n                </Segment.Group>\r\n            </Placeholder>\r\n        </Fragment>\r\n    );\r\n};\r\n","//our Activity Dashboard is goning to be a react component,so we need to\nimport { observer } from 'mobx-react-lite';\nimport { useEffect, useState } from 'react';\nimport { Grid, Loader } from 'semantic-ui-react';\nimport LoadingComponent from '../../../app/layout/LoadingComponent';\n// import { Activity } from '../../../app/models/activity';\nimport { useStore } from '../../../app/stores/store';\nimport ActivityList from '../dashboard/ActivityList';\n// import ActivityDetails from '../details/ActivityDetails';\n// import ActivityForm from '../form/ActivityForm';\nimport ActivityFilters from '../dashboard/ActivityFilters';\nimport { PagingParams } from '../../../app/models/pagination';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport ActivityListItemPlaceholder from './ActivityListItemPlaceholder';\n\n//specify an intyerface for properties,this will be standard for any component we create.\n// interface Props {\n//     activities: Activity[];\n//     //createOrEdit: (activity: Activity) => void;\n//     deleteActivity: (id: string) => void;\n//     submitting: boolean;\n// }\n//destructure the activities property itself\nexport default observer(function ActivityDashboard() {\n\n    //Mobx\n    const { activityStore } = useStore();\n    //destructure the properties that we need from activityStore\n    //const { selectedActivity, editMode } = activityStore;\n    const { loadActivities, activityRegistry, setPagingParams, pagination } = activityStore;//modified 242\n\n    //242\n    const [loadingNext, setLoadingNext] = useState(false);\n\n    //242\n    function handleGetNext() {\n        setLoadingNext(true);\n        setPagingParams(new PagingParams(pagination!.currentPage + 1));\n        loadActivities().then(() => setLoadingNext(false));\n    }\n\n    useEffect(() => {\n\n        //activityStore.loadActivities();\n        if (activityRegistry.size === 0) loadActivities();//when initializing activityRegistery inside ActivityStore is gonna be zero\n\n    }, [activityRegistry.size, loadActivities])//pass in the activity store as a dependncy to use effect here as well\n\n    //if (activityStore.loadingInitial && !loadingNext) return <LoadingComponent content='Loading activities...' />//modified 242-247\n\n    return (\n        <Grid>\n            <Grid.Column width='10'>\n                {/* </List> */\n                    //modified 243\n\n                    //modified 247\n                    activityStore.loadingInitial && !loadingNext ? (\n                        <>\n                            <ActivityListItemPlaceholder />\n                            <ActivityListItemPlaceholder />\n                        </>\n                    )\n                        : (\n                            <InfiniteScroll\n                                pageStart={0}\n                                loadMore={handleGetNext}\n                                hasMore={!loadingNext && !!pagination && pagination.currentPage < pagination.totalPages}\n                                initialLoad={false}\n                            >\n                                <ActivityList />\n                            </InfiniteScroll>\n                        )\n                }\n\n\n                {/* // activities={activities}\n                // deleteActivity={deleteActivity}\n                // submitting={submitting} */}\n\n            </Grid.Column>\n            <Grid.Column width='6'>\n                {/* View activity  */}\n                {/*we don't need to show the activity on the right hand*/}\n                {/* {selectedActivity && !editMode &&\n                    <ActivityDetails />\n                }\n                {\n                    editMode &&\n                    <ActivityForm />\n                    // createOrEdit={createOrEdit}\n                    // submitting={submitting} />\n                } */}\n\n                <ActivityFilters />\n            </Grid.Column>\n            <Grid.Column width={10}>\n                <Loader active={loadingNext} />\n            </Grid.Column>\n\n        </Grid>\n    )\n})","import React from 'react';\nimport { Dimmer, Loader } from 'semantic-ui-react';\n\ninterface Props {\n    inverted?: boolean;//dark background or light background\n    content?: string;//give some loading text\n}\n\nexport default function LoadingComponent({ inverted = true, content = 'Loading...' }: Props) {\n    return (\n        <Dimmer active={true} inverted={inverted}>\n            <Loader content={content} />\n        </Dimmer>\n    )\n}\n\n","/* Creating reusable text input */\n\nimport { useField } from 'formik';\nimport React from 'react';\nimport { Form, Label } from 'semantic-ui-react';\n\ninterface Props {\n    placeholder: string;\n    name: string;\n    type?:string;\n    label?: string;//optional\n}\n\nexport default function MyTextInput(props: Props) {\n    const [field, meta] = useField(props.name);\n\n    return (\n        <Form.Field error={meta.touched && !!meta.error}>\n            <label>{props.label}</label>\n            <input {...field}{...props} />\n            {meta.touched && meta.error ? (\n                <Label basic color='red'>{meta.error}</Label>\n            ) : null}\n        </Form.Field>\n    )\n}","/* Creating reusable text area */\n\nimport { useField } from 'formik';\nimport React from 'react';\nimport { Form, Label } from 'semantic-ui-react';\n\ninterface Props {\n    placeholder: string;\n    name: string;\n    rows:number;\n    label?: string;//optional\n}\n\nexport default function MyTextArea(props: Props) {\n    const [field, meta] = useField(props.name);\n\n    return (\n        <Form.Field error={meta.touched && !!meta.error}>\n            <label>{props.label}</label>\n            <textarea {...field}{...props} />\n            {meta.touched && meta.error ? (\n                <Label basic color='red'>{meta.error}</Label>\n            ) : null}\n        </Form.Field>\n    )\n}","/* Creating reusable select input */\n\nimport { useField } from 'formik';\nimport React from 'react';\nimport { Form, Label, Select } from 'semantic-ui-react';\n\ninterface Props {\n    placeholder: string;\n    name: string;\n    options: any;\n    label?: string;//optional\n}\n\nexport default function MySelectInput(props: Props) {\n    //helpers: allows us to manually set a value and manually set the touched status of our input component\n    const [field, meta, helpers] = useField(props.name);\n\n    return (\n        <Form.Field error={meta.touched && !!meta.error}>\n            <label>{props.label}</label>\n            <Select\n                clearable\n                options={props.options}\n                value={field.value || null}\n                onChange={(e, d) => helpers.setValue(d.value)}\n                onBlur={() => helpers.setTouched(true)}\n                placeholder={props.placeholder}\n            />\n            {meta.touched && meta.error ? (\n                <Label basic color='red'>{meta.error}</Label>\n            ) : null}\n        </Form.Field>\n    )\n}","export const categoryOptions=[\n    {text:'Drinks',value:'drinks'},\n    {text:'Culture',value:'culture'},\n    {text:'Film',value:'film'},\n    {text:'Food',value:'food'},\n    {text:'Music',value:'music'},\n    {text:'Travel',value:'travel'},\n\n]","/* Creating reusable date picker */\n\nimport { useField } from 'formik';\nimport React from 'react';\nimport { Form, Label } from 'semantic-ui-react';\nimport DatePicker, { ReactDatePickerProps } from 'react-datepicker';\n\n//Partial in Partial<ReactDatePickerProps>: make every property in ReactDatePickerProps optional\nexport default function MyDatePicker(props: Partial<ReactDatePickerProps>) {\n    const [field, meta,helpers] = useField(props.name!);\n\n    return (\n        <Form.Field error={meta.touched && !!meta.error}>\n            <DatePicker\n                // spread fiedls and props\n                {...field}\n                {...props}\n                selected={(field.value && new Date(field.value)) || null}\n                onChange={value=>helpers.setValue(value)}\n            />\n            {meta.touched && meta.error ? (\n                <Label basic color='red'>{meta.error}</Label>\n            ) : null}\n        </Form.Field>\n    )\n}","import { observer } from 'mobx-react-lite';\nimport { useEffect } from 'react';\nimport { useState } from 'react';\nimport { useHistory, useParams, Link } from 'react-router-dom';\nimport { Button, Header, Segment } from 'semantic-ui-react';\nimport LoadingComponent from '../../../app/layout/LoadingComponent';\n//import { Activity } from '../../../app/models/activity';\nimport { useStore } from '../../../app/stores/store';\nimport { v4 as uuid } from 'uuid';\nimport { Formik, Form } from 'formik';\nimport * as Yup from 'yup';\nimport MyTextInput from '../../../app/common/form/MyTextInput';\nimport MyTextArea from '../../../app/common/form/MyTextArea';\nimport MySelectInput from '../../../app/common/form/MySelectInput';\nimport { categoryOptions } from '../../../app/common/options/categoryOptions';\nimport MyDateInput from '../../../app/common/form/MyDateInput';\nimport {ActivityFormValues } from '../../../app/models/activity';\n\n//activity:selectedActivity --> reference  activity to selectedActivity name\nexport default observer(function ActivityForm() {\n    const history = useHistory();\n    const { activityStore } = useStore();\n    //const {selectedActivity,createActivity,updateActivity,loading}=activityStore;\n    const { createActivity, updateActivity, loadActivity, loadingInitial } = activityStore;\n\n    //populate initialState and store it inside component state\n    //const [activity, setActivity] = useState(initialState);\n\n    //using routes\n    const { id } = useParams<{ id: string }>();\n    // const [activity, setActivity] = useState({\n    const [activity, setActivity] = useState<ActivityFormValues>(new ActivityFormValues());\n\n    //yup validation schema\n    const validationSchema = Yup.object({\n        title: Yup.string().required('The activity title is required'),\n        description: Yup.string().required('The activity description is required'),\n        category: Yup.string().required(),//using Yup default message\n        date: Yup.string().required('Date is required').nullable(),\n        venue: Yup.string().required(),//using Yup default message\n        city: Yup.string().required()//using Yup default message\n    })\n    useEffect(() => {\n        if (id) loadActivity(id).then(activity => setActivity(new ActivityFormValues(activity!)));\n        // '!' --> exclamation mark after variable name called  :Non-null assertion operator\n        // it means you're telling to TypeScript that you're certain that value is not null or undefined.\n    }, [id, loadActivity])\n    //if we forget to add our dependencies, then what's going to happen is that each time we set the activity\n    //that's going to make our component render and evryu time our component redners,then we call the use\n    // effect and then we go and sets of states and then we render our component and then we go and use\n    // our effect,But if we add dependencuies, then we only execute the code inside here if of these parameters have changed\n\n    function handleFormSubmit(activity: ActivityFormValues) {\n\n        //redirectiona fter submisision\n        if (!activity.id) {\n            let newActivity = {\n                ...activity,\n                id: uuid()\n            };\n            //then callback to send them to the location we want them to go,in this case will \n            //take us to the new activity \n            //`` --> ta\n            createActivity(newActivity).then(() => history.push(`/activities/${newActivity.id}`))\n        }\n        else {\n            updateActivity(activity).then(() => history.push(`/activities/${activity.id}`))\n        }\n    }\n\n    // //track input fields changes\n    // function handleChange(event: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) {\n\n    //     const { name, value } = event.target;\n    //     setActivity({ ...activity, [name]: value });\n    // }\n\n    if (loadingInitial) return <LoadingComponent content='Loading activity...' />\n\n    return (\n        // we used clearing below to clear previous floats(without it buttons will float out of the form)\n        <Segment clearing>\n            {/* \n            Formik need some required props, it needs at least initialValues and onSubmit\n            enableReinitialize:we use this to fill the forms fields with activity data when click on manage event(edit activity)\n            initialvalues:in this case is equal the activity that we're going to continue to get from our local state\n\n             */}\n            <Header content='Activity Details' sub color='teal' />\n            <Formik\n                validationSchema={validationSchema}\n                enableReinitialize\n                initialValues={activity}\n                onSubmit={values => handleFormSubmit(values)}>\n                {/*below are the properties that we are intresetd in getting form formik\n                1-values\n                2- handlechange: is a function that we get from formic,which is goining to handle the input chnages.\n                3-handleSubmit: is also from formik\n                */}\n                {/*because we are using the Field and this automatically wires up to formik, we no longer need the\n                 values or the handle change being passed down to our form here just the handle submit for now.\n                 {({ values: activity, handleChange, handleSubmit }) => ( */}\n                {({ handleSubmit, isValid, isSubmitting, dirty }) => (\n                    <Form className='ui form' onSubmit={handleSubmit} autoComplete='off'>\n                        {/* <FormField>\n                            <Field placeholder='Title' name='title' />\n                            <ErrorMessage name='title'\n                            render={error => <Label basic color='red' content={error}/>}/>\n                        </FormField>\n                        <Field placeholder='Description' name='description' />\n                        <Field placeholder='Category' name='category' />\n                        <Field type='date' placeholder='Date' name='date' />\n                        <Field placeholder='City' name='city' />\n                        <Field placeholder='Venue' name='venue' />\n\n                        {/*after using useField()*/}\n                        <MyTextInput name='title' placeholder='Title' />\n                        <MyTextArea rows={3} placeholder='Description' name='description' />\n                        <MySelectInput options={categoryOptions} placeholder='Category' name='category' />\n                        <MyDateInput\n                            placeholderText='Date'\n                            name='date'\n                            showTimeSelect\n                            timeCaption='time'\n                            dateFormat='MMMM d, yyyy h:mm aa'\n                        />\n                        <Header content='Location Details' sub color='teal' />\n                        <MyTextInput placeholder='City' name='city' />\n                        <MyTextInput placeholder='Venue' name='venue' />\n                        <Button\n                        disabled={isSubmitting || !dirty ||!isValid}\n                            loading={isSubmitting}\n                            floated='right'\n                            positive\n                            type='submit'\n                            content='Submit' />\n                        <Button as={Link} to='/activities' floated='right' type='button' content='Cancel' />\n                    </Form>\n                )}\n\n            </Formik>\n\n        </Segment>\n    )\n})","import { ErrorMessage, Formik } from 'formik';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { Button, Form, Header, Label } from 'semantic-ui-react';\nimport MyTextInput from '../../app/common/form/MyTextInput';\nimport { useStore } from '../../app/stores/store';\n\nexport default observer(function LoginForm() {\n    const { userStore } = useStore();\n\n    return (\n        <Formik\n            initialValues={{ email: '', password: '', error: null }}\n            // onSubmit={values => userStore.login(values)}\n            //Displaying errors in the form\n            onSubmit={(values, { setErrors }) => userStore.login(values).catch(error =>\n                setErrors({ error: 'Invalid email or password' }))}\n        //setErrors:is a function that allows us to set errors inside our form\n        >\n            {({ handleSubmit, isSubmitting, errors }) => (\n                <Form className='ui form' onSubmit={handleSubmit} autoComplete='off'>\n                    <Header as='h2' content='Login to Reactivities' color='teal' textAlign='center'/>\n                    <MyTextInput name='email' placeholder='Email' />\n                    <MyTextInput name='password' placeholder='Password' type='password' />\n                    <ErrorMessage\n                        name='error'\n                        render={() =>\n                            <Label style={{ marginBottom: 10 }} basic color='red' content={errors.error} />}\n                    />\n                    <Button loading={isSubmitting} positive content='Login' type='submit' fluid />\n                </Form>\n            )}\n\n        </Formik>\n    )\n})","import React from 'react';\nimport { Message } from 'semantic-ui-react';\n\ninterface Props {\n    // errors: string[] | null;\n    errors: any;\n}\n\nexport default function ValidationErrors({ errors }: Props) {\n    return (\n        <Message error>\n            {errors &&\n                <Message.List>\n                    {errors.map((err: any, i:any) => (\n                        <Message.Item key={i}>{err}</Message.Item>\n                    ))}\n                </Message.List>}\n        </Message>\n    )\n}","import { ErrorMessage, Formik } from 'formik';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { Button, Form, Header } from 'semantic-ui-react';\nimport MyTextInput from '../../app/common/form/MyTextInput';\nimport { useStore } from '../../app/stores/store';\nimport * as Yup from 'yup';\nimport ValidationErrors from '../errors/ValidationErrors';\n\nexport default observer(function RegisterForm() {\n    const { userStore } = useStore();\n\n    return (\n        <Formik\n            initialValues={{ displayName: '', username: '', email: '', password: '', error: null }}\n            //Displaying errors in the form\n            onSubmit={(values, { setErrors }) => userStore.register(values).catch(error =>\n                setErrors({ error }))}\n            //setErrors:is a function that allows us to set errors inside our form\n            validationSchema={Yup.object({\n                displayName:Yup.string().required(),\n                username:Yup.string().required(),\n                email:Yup.string().required().email(),\n                password:Yup.string().required(),\n            })}\n        >\n            {({ handleSubmit, isSubmitting, errors ,isValid,dirty}) => (\n                <Form className='ui form error' onSubmit={handleSubmit} autoComplete='off'>\n                    <Header as='h2' content='Sign up to Reactivities' color='teal' textAlign='center' />\n                    <MyTextInput name='displayName' placeholder='Display Name' />\n                    <MyTextInput name='username' placeholder='Username' />\n                    <MyTextInput name='email' placeholder='Email' />\n                    <MyTextInput name='password' placeholder='Password' type='password' />\n                    <ErrorMessage\n                        name='error'\n                        render={() =>\n                            // <Label style={{ marginBottom: 10 }} basic color='red' content={errors.error} />}\n                            <ValidationErrors errors={errors.error}/>}\n                    />\n                    <Button disabled={!isValid || !dirty ||isSubmitting}\n                     loading={isSubmitting} positive content='Register' type='submit' fluid />\n                </Form>\n            )}\n\n        </Formik>\n    )\n})","import { observer } from 'mobx-react-lite';\nimport { Link } from 'react-router-dom';\nimport { Container, Header, Segment, Image, Button, Divider } from 'semantic-ui-react';\nimport { useStore } from '../../app/stores/store';\nimport LoginForm from '../users/LoginForm';\nimport RegisterForm from '../users/RegisterForm';\n\nexport default observer(function HomePage() {\n    const { userStore, modalStore } = useStore();\n    return (\n        // <Container style={{marginTop:'7em'}}>\n        //     <h1>Home page</h1>\n        //     <h3>Go to <Link to='/activities'>Activities</Link></h3>\n        // </Container>\n\n        //Styliing the Homepage\n        <Segment inverted textAlign='center' vertical className='masthead'>\n            <Container text>\n                <Header as='h1' inverted>\n                    <Image size='massive' src='/assets/logo.png' alt='logo' style={{ marginBottom: 12 }} />\n                    Reactivities\n                </Header>\n                {userStore.isLoggedIn ? (\n                    <>\n                        <Header as='h2' inverted content='Welcome to reactivities' />\n                        <Button as={Link} to='/activities' size='huge' inverted>\n                            Go to Activities\n                        </Button>\n                    </>\n                ) : (\n                    // <Button as={Link} to='/login' size='huge' inverted>\n                    //     Login!\n                    // </Button>\n                    //after adding modal\n                    <>\n                        <Button onClick={() => modalStore.openModal(<LoginForm />)} size='huge' inverted>\n                            Login!\n                        </Button>\n                        <Button onClick={() => modalStore.openModal(<RegisterForm />)} size='huge' inverted>\n                            Register!\n                        </Button>\n                        <Divider horizontal inverted>Or</Divider>\n                        <Button\n                            loading={userStore.fbLoading}\n                            size='huge'\n                            inverted\n                            color='facebook'\n                            content='Login with Facebook'\n                            onClick={userStore.facebookLogin}\n                        />\n                    </>\n                )}\n\n                {/* <Button as={Link} to='/activities' size='huge' inverted>\n                    Take me to the Activities\n                </Button> */}\n\n            </Container>\n\n        </Segment>\n    )\n})","import React from 'react'\nimport { Segment, List, Label, Item, Image } from 'semantic-ui-react'\nimport { Link } from 'react-router-dom'\nimport { observer } from 'mobx-react-lite'\nimport { Activity } from '../../../app/models/activity'\n\ninterface Props {\n    activity: Activity;\n}\n\nexport default observer(function ActivityDetailedSidebar({ activity: { attendees, host } }: Props) {\n    if (!attendees) return null;\n    return (\n        <>\n            <Segment\n                textAlign='center'\n                style={{ border: 'none' }}\n                attached='top'\n                secondary\n                inverted\n                color='teal'\n            >\n                {attendees.length}{attendees.length === 1 ? 'Person' : 'People'} going\n\n            </Segment>\n            <Segment attached>\n                <List relaxed divided>\n                    {attendees.map(attendee => (\n                        <Item style={{ position: 'relative' }} key={attendee.username}>\n                            {attendee.username === host?.username &&\n\n                                <Label\n                                    style={{ position: 'absolute' }}\n                                    color='orange'\n                                    ribbon='right'\n                                >\n                                    Host\n                                </Label>}\n                            <Image size='tiny' src={attendee.image || '/assets/user.png'} />\n                            <Item.Content verticalAlign='middle'>\n                                <Item.Header as='h3'>\n                                    <Link to={`/profiles/${attendee.username}`}>{attendee.displayName}</Link>\n                                </Item.Header>\n                                {//229\n                                    attendee.following &&\n                                    <Item.Extra style={{ color: 'orange' }}>Following</Item.Extra>}\n                            </Item.Content>\n                        </Item>\n                    ))}\n\n                </List>\n            </Segment>\n        </>\n\n    )\n})","import { observer } from 'mobx-react-lite';\nimport React from 'react'\nimport { Link } from 'react-router-dom';\nimport { Button, Header, Item, Segment, Image, Label } from 'semantic-ui-react'\nimport { Activity } from \"../../../app/models/activity\";\nimport { format } from 'date-fns';\nimport { useStore } from '../../../app/stores/store';\n\nconst activityImageStyle = {\n    filter: 'brightness(30%)'\n};\n\nconst activityImageTextStyle = {\n    position: 'absolute',\n    bottom: '5%',\n    left: '5%',\n    width: '100%',\n    height: 'auto',\n    color: 'white'\n};\n\ninterface Props {\n    activity: Activity\n}\n\nexport default observer(function ActivityDetailedHeader({ activity }: Props) {\n    const { activityStore: { updateAttendance, loading, cancelActivityToggle } } = useStore();\n    return (\n        <Segment.Group>\n            <Segment basic attached='top' style={{ padding: '0' }}>\n                {\n                    activity.isCancelled &&\n                    <Label style={{ position: 'absolute', zIndex: 1000, left: -14, top: 20 }}\n                        ribbon color='red' content='Cancelled' />\n                }\n                <Image src={`/assets/categoryImages/${activity.category}.jpg`} fluid style={activityImageStyle} />\n                <Segment style={activityImageTextStyle} basic>\n                    <Item.Group>\n                        <Item>\n                            <Item.Content>\n                                <Header\n                                    size='huge'\n                                    content={activity.title}\n                                    style={{ color: 'white' }}\n                                />\n                                <p>{format(activity.date!, 'dd MMM yyyy')}</p>\n                                <p>\n                                    Hosted by <strong><Link to={`/profiles/${activity.host?.username}`}>{activity.host?.displayName}</Link></strong>\n                                </p>\n                            </Item.Content>\n                        </Item>\n                    </Item.Group>\n                </Segment>\n            </Segment>\n            <Segment clearing attached='bottom'>\n                {activity.isHost ? (\n                    <>\n                        <Button\n                            color={activity.isCancelled ? 'green' : 'red'}\n                            floated='left'\n                            basic\n                            content={activity.isCancelled ? 'Re-activate Activity' : 'Cancel Activitiy'}\n                            onClick={cancelActivityToggle}\n                            loading={loading}\n                        />\n                        <Button as={Link}\n                            disabled={activity.isCancelled}\n                            to={`/manage/${activity.id}`}\n                            color='orange'  \n                            floated='right'>\n                            Manage Event\n                        </Button>\n                    </>\n\n                ) : activity.isGoing ? (\n                    <Button onClick={updateAttendance}>Cancel attendance</Button>\n\n                ) : (\n                <Button disabled={activity.isCancelled}\n                    loading={loading}\n                    onClick={updateAttendance}\n                    color='teal'>\n                    Join Activity\n                </Button>\n                )}\n\n            </Segment>\n        </Segment.Group>\n    )\n})","\nimport { observer } from 'mobx-react-lite';\nimport React from 'react'\nimport {Segment, Grid, Icon} from 'semantic-ui-react'\nimport {Activity} from \"../../../app/models/activity\";\nimport {format} from 'date-fns';\n\ninterface Props {\n    activity: Activity\n}\n\nexport default observer(function ActivityDetailedInfo({activity}: Props) {\n    return (\n        <Segment.Group>\n            <Segment attached='top'>\n                <Grid>\n                    <Grid.Column width={1}>\n                        <Icon size='large' color='teal' name='info'/>\n                    </Grid.Column>\n                    <Grid.Column width={15}>\n                        <p>{activity.description}</p>\n                    </Grid.Column>\n                </Grid>\n            </Segment>\n            <Segment attached>\n                <Grid verticalAlign='middle'>\n                    <Grid.Column width={1}>\n                        <Icon name='calendar' size='large' color='teal'/>\n                    </Grid.Column>\n                    <Grid.Column width={15}>\n            <span>\n              {format(activity.date!,'dd MMM yyyy h:mm aa')}\n            </span>\n                    </Grid.Column>\n                </Grid>\n            </Segment>\n            <Segment attached>\n                <Grid verticalAlign='middle'>\n                    <Grid.Column width={1}>\n                        <Icon name='marker' size='large' color='teal'/>\n                    </Grid.Column>\n                    <Grid.Column width={11}>\n                        <span>{activity.venue}, {activity.city}</span>\n                    </Grid.Column>\n                </Grid>\n            </Segment>\n        </Segment.Group>\n    )\n})\n","import { Formik, Form, Field, FieldProps } from 'formik';\nimport { observer } from 'mobx-react-lite'\nimport React, { useEffect } from 'react'\nimport { Link } from 'react-router-dom';\nimport { Segment, Header, Comment, Loader } from 'semantic-ui-react'\nimport { useStore } from '../../../app/stores/store';\nimport * as Yup from 'yup';//218\nimport { formatDistanceToNow } from 'date-fns';\n//216\ninterface Props {\n    activityId: string;\n}\n\nexport default observer(function ActivityDetailedChat({ activityId }: Props) {\n    const { commentStore } = useStore();//216\n\n    //216\n    useEffect(() => {\n        if (activityId) {\n            commentStore.createHubConnection(activityId);\n        }\n        return () => {\n            commentStore.clearComments();\n        }\n    }, [commentStore, activityId]);\n\n    return (\n        <>\n            <Segment\n                textAlign='center'\n                attached='top'\n                inverted\n                color='teal'\n                style={{ border: 'none' }}\n            >\n                <Header>Chat about this event</Header>\n            </Segment>\n            <Segment attached clearing>\n                { /*217 also modified 219*/}\n                <Formik\n                    onSubmit={(values, { resetForm }) =>\n                        commentStore.addComment(values).then(() => resetForm())}\n                    initialValues={{ body: '' }}\n                    //218\n                    validationSchema={Yup.object({\n                        body: Yup.string().required()\n                    })}\n\n                >\n                    {({ isSubmitting, isValid, handleSubmit }) => (\n                        <Form className='ui form'>\n                            {/*218*/}\n                            <Field name='body'>\n                                {(props: FieldProps) => (\n                                    <div style={{ position: 'relative' }}>\n                                        <Loader active={isSubmitting} />\n                                        <textarea\n                                            placeholder='Enter your comment (Enter to submit, SHIFT + enter for new line)'\n                                            rows={2}\n                                            {...props.field}\n                                            onKeyPress={e => {\n                                                if (e.key === 'Enter' && e.shiftKey) {\n                                                    return;\n                                                }\n                                                if (e.key === 'Enter' && !e.shiftKey) {\n                                                    e.preventDefault();\n                                                    isValid && handleSubmit();\n                                                }\n                                            }}\n                                        />\n                                    </div>\n                                )}\n                            </Field>\n                        </Form>\n                    )}\n                </Formik>\n                <Comment.Group>\n                    { //216\n                        commentStore.comments.map(comment => (\n                            <Comment key={comment.id}>\n                                <Comment.Avatar src={comment.image || '/assets/user.png'} />\n                                <Comment.Content>\n                                    <Comment.Author as={Link} to={`/profile/${comment.username}`}>{comment.displayName}</Comment.Author>\n                                    <Comment.Metadata>\n                                        <div>{formatDistanceToNow(comment.createdAt)/*modified 219*/} ago</div>\n                                    </Comment.Metadata>\n                                    <Comment.Text style={{ whiteSpace: 'pre-wrap' }}>{comment.body}</Comment.Text>\n                                </Comment.Content>\n                            </Comment>\n                        ))\n                    }\n\n\n                </Comment.Group>\n            </Segment>\n        </>\n\n    )\n})","import React from 'react';\n// import { Activity } from '../../../app/models/activity';\nimport {Grid } from 'semantic-ui-react';\nimport { useStore } from '../../../app/stores/store';\nimport LoadingComponent from '../../../app/layout/LoadingComponent';\nimport {useParams } from 'react-router-dom';\nimport { useEffect } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport ActivityDetailedSidebar from '../details/ActivityDetailedSidebar';\nimport ActivityDetailedHeader from '../details/ActivityDetailedHeader';\nimport ActivityDetailedInfo from '../details/ActivityDetailedInfo';\nimport ActivityDetailedChat from '../details/ActivityDetailedChat';\n// interface Props {\n//     activity: Activity;\n//     cancelSelectActivity:()=>void;\n//     openForm: (id: string) => void;\n// }\n\nexport default observer(function ActivityDetails() {\n    const { activityStore } = useStore();\n    const { selectedActivity: activity,loadActivity,loadingInitial,clearSelectedActivity } = activityStore;//modified 219\n\n    //using route parameters\n    const { id } = useParams<{ id: string }>();\n    // we want to side effect to occur when we load this particular component.\n    useEffect(() => {\n        if (id) loadActivity(id);\n        return () => clearSelectedActivity();//219\n    },[id,loadActivity,clearSelectedActivity]);//id and loadActivity here are dependencies //modified 219\n\n\n    if (loadingInitial || !activity) return <LoadingComponent />;//we should return jsx element here,this will not return any thing,because we are\n    // not oding anything to load activity at this stage\n    return (\n        // <Card fluid>\n        //     {/* {``} -->allows us to directly add javascript property `-->press on ذ  */}\n        //     <Image src={`/assets/categoryImages/${activity.category}.jpg `} />\n        //     <Card.Content>\n        //         <Card.Header>{activity.title}</Card.Header>\n        //         <Card.Meta>\n        //             <span>{activity.date}</span>\n        //         </Card.Meta>\n        //         <Card.Description>\n        //             {activity.description}\n        //         </Card.Description>\n        //     </Card.Content>\n        //     <Card.Content extra>\n        //         <Button.Group widths='2'>\n        //             <Button as={Link} to={`/manage/${activity.id}`} basic color='blue' content='Edit' />\n        //             {/* below we don't need to use ()=> because we don't pass any parameter to the function */}\n        //             <Button as={Link} to='/activities' basic color='grey' content='Cancel' />\n        //         </Button.Group>\n        //     </Card.Content>\n        // </Card>\n\n        <Grid>\n            <Grid.Column width={10}>\n                <ActivityDetailedHeader activity={activity} />\n                \n                <ActivityDetailedInfo activity={activity}/>\n                <ActivityDetailedChat activityId={activity.id} />{ /*modified 216*/}\n            </Grid.Column>\n            <Grid.Column width={6}>\n                <ActivityDetailedSidebar activity={activity}/>\n            </Grid.Column>\n        </Grid>\n\n    )\n})","import React from 'react';\nimport { Button, Header, Segment } from \"semantic-ui-react\";\nimport axios from 'axios';\nimport { useState } from 'react';\nimport ValidationErrors from '../errors/ValidationErrors';\n\nexport default function TestErrors() {\n    const baseUrl = process.env.REACT_APP_API_URL; //modified 254\n    const [errors, setErrors] = useState(null);\n\n    function handleNotFound() {\n        axios.get(baseUrl + 'buggy/not-found').catch(err => console.log(err.response));\n    }\n\n    function handleBadRequest() {\n        axios.get(baseUrl + 'buggy/bad-request').catch(err => console.log(err.response));\n    }\n\n    function handleServerError() {\n        axios.get(baseUrl + 'buggy/server-error').catch(err => console.log(err.response));\n    }\n\n    function handleUnauthorised() {\n        axios.get(baseUrl + 'buggy/unauthorised').catch(err => console.log(err.response));\n    }\n\n    function handleBadGuid() {\n        axios.get(baseUrl + 'activities/notaguid').catch(err => console.log(err.response));\n    }\n\n    function handleValidationError() {\n        // axios.post(baseUrl + 'activities', {}).catch(err => console.log(err.response));\n        // axios.post(baseUrl + 'activities', {}).catch(err => console.log(err));\n        axios.post(baseUrl + 'activities', {}).catch(err => setErrors(err));\n    }\n\n    return (\n        <>\n            <Header as='h1' content='Test Error component' />\n            <Segment>\n                <Button.Group widths='7'>\n                    <Button onClick={handleNotFound} content='Not Found' basic primary />\n                    <Button onClick={handleBadRequest} content='Bad Request' basic primary />\n                    <Button onClick={handleValidationError} content='Validation Error' basic primary />\n                    <Button onClick={handleServerError} content='Server Error' basic primary />\n                    <Button onClick={handleUnauthorised} content='Unauthorised' basic primary />\n                    <Button onClick={handleBadGuid} content='Bad Guid' basic primary />\n                </Button.Group>\n            </Segment>\n\n            {//Displays the validation error\n                errors &&\n                <ValidationErrors errors={errors} />\n            }\n        </>\n    )\n}","import React from 'react';\nimport { Button, Header, Icon, Segment } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\n\nexport default function NotFound() {\n    return (\n        <Segment placeholder>\n            <Header icon>\n                <Icon name='search' />\n                Oops - we've looked everywhere and could not find this.\n            </Header>\n            <Segment.Inline>\n                <Button as={Link} to='/activities' primary>\n                    Return to activitiespage\n                </Button>\n            </Segment.Inline>\n        </Segment>\n    )\n}","import { observer } from \"mobx-react-lite\";\nimport React from \"react\";\nimport { Container, Header, Segment } from \"semantic-ui-react\";\nimport { useStore } from '../../app/stores/store';\n\nexport default observer(function ServerError() {\n\n    const { commonStore } = useStore();\n\n    return (\n        <Container>\n            <Header as='h1' content='Server Error' />\n            <Header sub as='h5' color='red' content={commonStore.error?.message} />\n            {\n                commonStore.error?.details &&\n                    <Segment>\n                        <Header as='h4' content='Stack trace' color='teal' />\n                        <code style={{ marginTop: '10px' }}>\n                            {commonStore.error.details}\n                        </code>\n                    </Segment>\n\n            }\n\n        </Container>\n    )\n})","import { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { Modal } from 'semantic-ui-react';\nimport { useStore } from '../../stores/store';\n\nexport default observer(function ModalContainer(){\n    const {modalStore}=useStore();\n\n    return (\n        <Modal open={modalStore.modal.open} onClose={modalStore.closeModal} size='mini'>\n            <Modal.Content>\n                {modalStore.modal.body}\n            </Modal.Content>\n        </Modal>\n    )\n})","//193\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { Divider, Grid, Header, Item, Segment, Statistic } from 'semantic-ui-react';\nimport { Profile } from '../../app/models/profile';\nimport FollowButton from './FollowButton';\n\n//196\ninterface Props{\n    profile:Profile;\n}\n\nexport default observer(function ProfileHeader({profile}:Props) {\n    return (\n        <Segment>\n            <Grid>\n                <Grid.Column width={12}>\n                    <Item.Group>\n                        <Item>\n                            <Item.Image avatar size='small' src={profile.image || '/assets/user.png'} />\n                            <Item.Content verticalAlign='middle'>\n                                <Header as='h1' content={profile.displayName} />\n                            </Item.Content>\n                        </Item>\n                    </Item.Group>\n                </Grid.Column>\n                <Grid.Column width={4}>\n                    <Statistic.Group widths={2}>\n                        <Statistic label='Followers' value={profile.followersCount /*229*/} />\n                        <Statistic label='Following' value={profile.followingCount /*229*/} />\n                    </Statistic.Group>\n                    <Divider />{/*horizental line*/}\n                   <FollowButton profile={profile}/>{/*231*/}\n                </Grid.Column>\n\n            </Grid>\n        </Segment>\n    )\n})","//207\nimport { Form, Formik } from \"formik\";\nimport { observer } from \"mobx-react-lite\";\nimport { Button } from \"semantic-ui-react\";\nimport MyTextArea from \"../../app/common/form/MyTextArea\";\nimport MyTextInput from \"../../app/common/form/MyTextInput\";\nimport { useStore } from \"../../app/stores/store\";\nimport * as Yup from 'yup';\n\n\ninterface Props {\n    setEditMode: (editMode: boolean) => void;\n    }\n    export default observer(function ProfileEditForm({setEditMode}: Props) {\n    const {profileStore: {profile, updateProfile}} = useStore();\n    return (\n    <Formik\n    initialValues={{displayName: profile?.displayName, bio:\n    profile?.bio}}\n    onSubmit={values => {\n    updateProfile(values).then(() => {\n    setEditMode(false);\n    })\n    }}\n    validationSchema={Yup.object({\n    displayName: Yup.string().required()\n    })}\n    >\n    {({isSubmitting, isValid, dirty}) => (\n    <Form className='ui form'>\n    <MyTextInput placeholder='Display Name'\n    name='displayName' />\n    <MyTextArea rows={3} placeholder='Add your bio'\n    name='bio' />\n    <Button\n    positive\n    type='submit'\n    loading={isSubmitting}\n    content='Update profile'\n    floated='right'\n    disabled={!isValid || !dirty}\n    />\n    </Form>\n    )}\n    </Formik>\n    )\n    })","//207\nimport React, { useState } from 'react';\nimport { useStore } from \"../../app/stores/store\";\nimport { Button, Grid, Header, Tab } from \"semantic-ui-react\";\nimport ProfileEditForm from \"./ProfileEditForm\";\nimport { observer } from 'mobx-react-lite';\n\n\nexport default observer(function ProfileAbout() {\n    const { profileStore } = useStore();\n    const { isCurrentUser, profile } = profileStore;\n    const [editMode, setEditMode] = useState(false);\n    return (\n        <Tab.Pane>\n            <Grid>\n                <Grid.Column width='16'>\n                    <Header floated='left' icon='user' content={`About ${profile?.displayName}`} />\n                    {isCurrentUser && (\n                        <Button\n                            floated='right'\n                            basic\n                            content={editMode ? 'Cancel' : 'Edit Profile'}\n                            onClick={() => setEditMode(!editMode)}\n                        />\n                    )}\n                </Grid.Column>\n                <Grid.Column width='16'>\n                    {editMode ? <ProfileEditForm setEditMode={setEditMode} /> :\n                        <span style={{ whiteSpace: 'pre-wrap' }}>{profile?.bio}</span>}\n                </Grid.Column>\n            </Grid>\n        </Tab.Pane>\n    )\n})","//200\n//below code is copied from https://github.com/react-dropzone/react-dropzone --> Usage\n//but we made our changes in the code\nimport React, { useCallback } from 'react'\nimport { useDropzone } from 'react-dropzone'\nimport { Header, Icon } from 'semantic-ui-react'\n\n//201\ninterface Props {\n    setFiles: (files: any) => void;\n\n}\n\nexport default function PhotoWidgetDropzone({ setFiles }: Props) {\n\n    //201\n    const dzStyles = {\n        border: 'dashed 3px #eee',\n        borderColor: '#eee',\n        borderRadius: '5px',\n        paddingTop: '30px',\n        textAlign: 'center' as 'center',\n        height: 200\n    }\n    //201\n    const dzActive = {\n        borderColor: 'green'\n    }\n\n    const onDrop = useCallback(acceptedFiles => {\n        //201\n        setFiles(acceptedFiles.map((file: any) => Object.assign(file, {\n            preview: URL.createObjectURL(file)\n        })))\n    }, [setFiles])\n\n    const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop })\n\n    return (\n        <div {...getRootProps()} style={isDragActive ? { ...dzStyles, ...dzActive } : dzStyles}>\n            <input {...getInputProps()} />\n            <Icon name='upload' size='huge' />\n            <Header content='Drop image here' />\n        </div>\n    )\n}\n","//202\nimport React from 'react';\nimport { Cropper } from 'react-cropper';\nimport 'cropperjs/dist/cropper.css';\n\ninterface Props{\n    imagePreview:string;\n    setCropper:(cropper:Cropper) => void;    \n}\nexport default function PhotoWidgetCropper({imagePreview,setCropper}:Props) {\n    return (\n        <Cropper\n            src={imagePreview}\n            style={{ height: 200, width: '100%' }}\n            initialAspectRatio={1}\n            aspectRatio={1}\n            preview='.img-preview'\n            guides={false}\n            viewMode={1}\n            autoCropArea={1}\n            background={false}\n            onInitialized={cropper=> setCropper(cropper)}\n\n        />\n\n    )\n}","\n//199\nimport React, { useEffect, useState } from 'react';\nimport { Button, Grid, Header } from 'semantic-ui-react';\nimport PhotoWidgetDropzone from '../imageUpload/PhotoWidgetDropzone';\nimport PhotoWidgetCropper from '../imageUpload/PhotoWidgetCropper';\n\n\n//203\ninterface Props{\n    loading:boolean;\n    uploadPhoto:(file:Blob) => void;\n}\nexport default function PhotoUploadWidget({loading,uploadPhoto}:Props) {\n    const [files, setFiles] = useState<any>([]);//201\n\n    const [cropper, setCropper] = useState<Cropper>();//202\n    //202\n    function onCrop() {\n        if (cropper) {\n            cropper.getCroppedCanvas().toBlob(blob => uploadPhoto(blob!));//modified on 203\n        }\n    }\n    //202\n    useEffect(() => {\n        return () => {\n            files.forEach((file: any) => URL.revokeObjectURL(file.preview))\n        }\n    }, [files])\n\n    return (\n        <Grid>\n            <Grid.Column width={4}>\n                <Header sub color='teal' content='Step 1 - Add Photo' />\n                <PhotoWidgetDropzone setFiles={setFiles} />\n            </Grid.Column>\n            <Grid.Column width={1} />\n            <Grid.Column width={4}>\n                <Header sub color='teal' content='Step 2 - Resize image' />\n                {\n                    //201 \n                    files && files.length > 0 && (\n                        //202\n                        <PhotoWidgetCropper setCropper={setCropper} imagePreview={files[0].preview} />\n                    )\n                }\n            </Grid.Column>\n            <Grid.Column width={1} />\n            <Grid.Column width={4}>\n                <Header sub color='teal' content='Step 3 - Preview & Upload' />\n                {//202\n                files && files.length > 0 &&\n                    <>\n                        <div className='img-preview' style={{ minHeight: 200, overflow: 'hidden' }} />\n                        <Button.Group widths={2}>                            \n                            <Button loading={loading} onClick={onCrop} positive icon='check' />\n                            <Button disabled={loading} onClick={() => setFiles([])} icon='close' />\n                        </Button.Group>\n                    </>\n                }\n\n            </Grid.Column>\n        </Grid>\n    )\n}","//197\nimport React, { SyntheticEvent, useState } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Button, Card, Grid, Header, Image, Tab } from 'semantic-ui-react';\nimport { Photo, Profile } from '../../app/models/profile';\nimport { useStore } from '../../app/stores/store';\nimport PhotoUploadWidget from '../../app/common/imageUpload/PhotoUploadWidget';\n\n//197\ninterface Props {\n    profile: Profile;\n}\n\nexport default observer(function ProfilePhotos({ profile }: Props) {\n    //198\n    const { profileStore: { isCurrentUser, uploadPhoto, uploading,\n        loading, setMainPhoto, deletePhoto } } = useStore();\n    const [addPhotoMode, setAddPhotoMode] = useState(false);\n    //204\n    const [target, setTarget] = useState('');\n    //203\n    function handlePhotoUpload(file: Blob) {\n        uploadPhoto(file).then(() => setAddPhotoMode(false));\n    }\n    //204\n    function handleSetMainPhoto(photo: Photo, e: SyntheticEvent<HTMLButtonElement>) {\n        setTarget(e.currentTarget.name);\n        setMainPhoto(photo);\n    }\n    //205\n    function handleDeletePhoto(photo: Photo, e: SyntheticEvent<HTMLButtonElement>) {\n        setTarget(e.currentTarget.name);\n        deletePhoto(photo);\n    }\n    return (\n        <Tab.Pane>\n            <Grid>\n                <Grid.Column width={16}>\n                    <Header floated='left' icon='image' content='Photos' />\n                    {\n                        isCurrentUser && (\n                            <Button floated='right' basic\n                                content={addPhotoMode ? 'Cancel' : 'Add Photo'}\n                                onClick={() => setAddPhotoMode(!addPhotoMode)} />\n                        )\n                    }\n                </Grid.Column>\n                <Grid.Column width={16}>\n                    {addPhotoMode ? (\n\n                        //<PhotoUploadWidget />\n                        //203\n                        <PhotoUploadWidget uploadPhoto={handlePhotoUpload} loading={uploading} />\n                    ) : (\n\n                        <Card.Group itemsPerRow={5}>\n                            {\n                                profile.photos?.map(photo => (\n                                    <Card key={photo.id}>\n                                        <Image src={photo.url} />\n                                        {//204\n                                            isCurrentUser && (\n                                                <Button.Group fluid width={2}>\n                                                    <Button\n                                                        basic\n                                                        color='green'\n                                                        content='Main'\n                                                        name={'main' + photo.id} //modified 205\n                                                        disabled={photo.isMain}\n                                                        loading={target === 'main' + photo.id && loading} //modified 205\n                                                        onClick={e => handleSetMainPhoto(photo, e)}\n                                                    />\n                                                    <Button\n                                                        //modified 205\n                                                        basic\n                                                        color='red'\n                                                        icon='trash'\n                                                        loading={target === photo.id && loading}\n                                                        onClick={e => handleDeletePhoto(photo, e)}\n                                                        disabled={photo.isMain}\n                                                        name={photo.id}\n                                                    />\n\n                                                </Button.Group>\n                                            )\n\n                                        }\n                                    </Card>\n                                ))}\n                        </Card.Group>\n                    )\n\n                    }\n                </Grid.Column>\n\n            </Grid>\n\n\n        </Tab.Pane>\n\n\n    )\n})","\n//232\nimport React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { useStore } from \"../../app/stores/store\";\nimport { Card, Grid, Header, Tab } from 'semantic-ui-react';\nimport ProfileCard from './ProfileCard';\n\nexport default observer(function ProfileFollowings() {\n    const { profileStore } = useStore();\n    const { profile, followings, loadingFollowings ,activeTab} = profileStore;//modified 233\n\n    return (\n        <Tab.Pane loading={loadingFollowings}>\n            <Grid>\n                <Grid.Column width={16}>\n                    <Header\n                        floated='left'\n                        icon='user'\n                        content={activeTab === 3 ? `People following ${profile?.displayName}`:`People ${profile?.displayName} is following`} />\n                </Grid.Column>\n                <Grid.Column width={16}>\n                    <Card.Group itemsPerRow={4}>\n                        {followings.map(profile => (\n                            <ProfileCard key={profile.username} profile={profile} />\n                        ))}\n                    </Card.Group>\n                </Grid.Column>\n\n            </Grid>\n        </Tab.Pane>\n    )\n})","//249\r\nimport React, { SyntheticEvent, useEffect } from 'react';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { Tab, Grid, Header, Card, Image, TabProps } from 'semantic-ui-react';\r\nimport { Link } from 'react-router-dom';\r\nimport { UserActivity } from '../../app/models/profile';\r\nimport { format } from 'date-fns';\r\nimport { useStore } from \"../../app/stores/store\";\r\n\r\nconst panes = [\r\n    { menuItem: 'Future Events', pane: { key: 'future' } },\r\n    { menuItem: 'Past Events', pane: { key: 'past' } },\r\n    { menuItem: 'Hosting', pane: { key: 'hosting' } }\r\n];\r\n\r\nexport default observer(function ProfileActivities() {\r\n    const { profileStore } = useStore();\r\n    const {\r\n        loadUserActivities,\r\n        profile,\r\n        loadingActivities,\r\n        userActivities\r\n    } = profileStore;\r\n    useEffect(() => {\r\n        loadUserActivities(profile!.username);\r\n    }, [loadUserActivities, profile]);\r\n    const handleTabChange = (e: SyntheticEvent, data: TabProps) => {\r\n        loadUserActivities(profile!.username, panes[data.activeIndex as\r\n            number].pane.key);\r\n    };\r\n    return (\r\n        <Tab.Pane loading={loadingActivities}>\r\n            <Grid>\r\n                <Grid.Column width={16}>\r\n                    <Header\r\n                        floated='left'\r\n                        icon='calendar'\r\n                        content={'Activities'} />\r\n                </Grid.Column>\r\n                <Grid.Column width={16}>\r\n                    <Tab\r\n                        panes={panes}\r\n                        menu={{ secondary: true, pointing: true }}\r\n                        onTabChange={(e, data) => handleTabChange(e, data)}\r\n                    />\r\n                    <br />\r\n                    <Card.Group itemsPerRow={4}>\r\n                        {userActivities.map((activity: UserActivity) => (\r\n                            <Card\r\n                                as={Link}\r\n                                to={`/activities/${activity.id}`}\r\n                                key={activity.id}\r\n                            >\r\n                                <Image\r\n                                    src={`/assets/categoryImages/${activity.category}.jpg`}\r\n                                    style={{\r\n                                        minHeight: 100, objectFit:\r\n                                            'cover'\r\n                                    }}\r\n                                />\r\n                                <Card.Content>\r\n                                    <Card.Header\r\n                                        textAlign='center'>{activity.title}</Card.Header>\r\n                                    <Card.Meta textAlign='center'>\r\n                                        <div>{format(new Date(activity.date), 'do LLL')}</div>\r\n                                        <div>{format(new Date(activity.date), 'h:mm a')}</div>\r\n                                    </Card.Meta>\r\n                                </Card.Content>\r\n                            </Card>\r\n                        ))}\r\n                    </Card.Group>\r\n                </Grid.Column>\r\n            </Grid>\r\n        </Tab.Pane>\r\n    );\r\n});","//194\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { Tab } from 'semantic-ui-react';\nimport { Profile } from '../../app/models/profile';\nimport ProfileAbout from './ProfileAbout';\nimport ProfilePhotos from './ProfilePhotos';\nimport ProfileFollowings from './ProfileFollowings';\nimport { useStore } from '../../app/stores/store';\nimport ProfileActivities from './ProfileActivities';\n//197\ninterface Props {\n    profile: Profile;\n}\n\n//modified 207\nexport default observer(function ProfileContent({ profile }: Props) {\n\n    const { profileStore } = useStore();//233\n\n    const panes = [\n        { menuItem: 'About', render: () => /*207*/<ProfileAbout /> },\n        { menuItem: 'Photos', render: () => /*197*/<ProfilePhotos profile={profile} /> },\n        { menuItem: 'Event', render: () => /*249*/<ProfileActivities /> },\n        { menuItem: 'Followers', render: () => /*232*/<ProfileFollowings /> },\n        { menuItem: 'Following', render: () => /*232*/<ProfileFollowings /> },\n    ];\n\n    return (\n        <Tab\n            menu={{ fluid: true, vertical: true }}\n            menuPosition='right'\n            panes={panes}\n            onTabChange={(e, data) => profileStore.setActiveTab(data.activeIndex)}\n\n        />\n    )\n})","//192\nimport React, { useEffect } from 'react';\nimport { Grid } from 'semantic-ui-react';\nimport ProfileHeader from '../profiles/ProfileHeader';\nimport ProfileContent from '../profiles/ProfileContent';\nimport { observer } from 'mobx-react-lite';\nimport { useStore } from '../../app/stores/store';\nimport { useParams } from 'react-router';\nimport LoadingComponent from '../../app/layout/LoadingComponent';\n\nexport default observer(function ProfilePage() {\n\n    const { username } = useParams<{ username: string }>();//196\n    const { profileStore } = useStore();//196\n    const { loadingProfile, loadProfile, profile, setActiveTab } = profileStore;//196 //modified 233\n\n    useEffect(() => {\n        loadProfile(username);\n        //233\n        return () => {\n            setActiveTab(0);\n        }\n    }, [loadProfile, username,setActiveTab])\n\n    if (loadingProfile) return <LoadingComponent content='Loading profile...' />\n\n    return (\n        <Grid>\n            <Grid.Column width={16}>\n                {profile &&\n                    <>\n                        <ProfileHeader profile={profile} />\n                        <ProfileContent profile={profile} />\n                    </>\n                }\n\n            </Grid.Column>\n        </Grid>\n    )\n})","import { Redirect, Route, RouteComponentProps, RouteProps } from \"react-router\";\r\nimport { useStore } from \"../stores/store\";\r\n\r\n//253\r\ninterface Props extends RouteProps {\r\n    component: React.ComponentType<RouteComponentProps<any>> | React.ComponentType<any>;\r\n}\r\n\r\nexport default function PrivateRoute({ component: Component, ...rest }: Props) {\r\n    const {userStore: {isLoggedIn}} = useStore();\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={(props) => isLoggedIn ? <Component {...props} /> : <Redirect to='/' />}\r\n            />\r\n    )\r\n}","import { Container } from 'semantic-ui-react';\nimport NavBar from '../layout/NavBar';\nimport ActivityDashboard from '../../features/activities/dashboard/ActivityDashboard';\nimport { observer } from 'mobx-react-lite';\nimport { Route, Switch, useLocation } from 'react-router-dom';\nimport ActivityForm from '../../features/activities/form/ActivityForm';\nimport HomePage from '../../features/home/HomePage';\nimport ActivityDetails from '../../features/activities/details/ActivityDetails';\nimport TestErrors from '../../features/errors/TestErrors';\nimport { ToastContainer } from 'react-toastify';\nimport NotFound from '../../features/errors/NotFound';\nimport ServerError from '../../features/errors/ServerError';\n// import LoginForm from '../../features/users/LoginForm';\nimport { useStore } from '../stores/store';\nimport { useEffect } from 'react';\nimport LoadingComponent from './LoadingComponent';\nimport ModalContainer from '../common/modals/ModalContainer';\nimport ProfilePage from '../../features/profiles/ProfilePage';\nimport PrivateRoute from './PrivateRoute';\n\nfunction App() {\n  //loading sppineer is appearing on each compoents,we we will remove it form here and paste it inside activty dashboard 1,2 and 3\n  //using MobX store,hook in store.ts file\n  //1\n  //const { activityStore } = useStore();\n\n  //local states\n  //const [activities, setActivities] = useState([]);\n  //const [activities, setActivities] = useState<Activity[]>([]);//added after adding activity.ts interface\n  //View selected activity\n  // const [selectedActivity, setSelectedActivity] = useState<Activity | undefined>(undefined);//(undefined is the initial value)\n  // //edit mode\n  // const [editMode, setEditMode] = useState(false);//set initially to false\n  //state for Loading\n  //remove the loading from here\n  // const [loading, setLoading] = useState(true);//set initially to true\n  //state of submitting\n  //const [submitting, setSubmitting] = useState(false);//set initially to false\n\n  //2\n  // useEffect(() => {\n  //   //calling get activities API\n  //   //we changed axios.get('http://localhost:5000/api/activities'). to get type safety\n  //   //we comment the below when we start using axios section\n  //   // axios.get<Activity[]>('http://localhost:5000/api/activities').then(response => {\n  //   //   setActivities(response.data);\n  //   // })\n  //   // agent.Activities.list().then(response=>{\n  //   //   setActivities(response);\n  //   // });\n\n  //   //after adding input type=date to input field in form,it won't display the date that returns from activities becuase it is in different format \n  //   //so we need to reformat the date that returns from database\n  //   // agent.Activities.list().then(response => {\n  //   //   //create a new array of Activity \n  //   //   let activities: Activity[] = [];\n  //   //   response.forEach(activity => {\n  //   //     activity.date = activity.date.split('T')[0];//split at T and get the first peice\n  //   //     activities.push(activity);\n  //   //   })\n  //   //   setActivities(activities);\n  //   //   setLoading(false);//trun off loading indicator\n  //   // });\n\n  //   //after refacotring\n  //   activityStore.loadActivities();\n  // }, [activityStore])//pass in the activity store as a dependncy to use effect here as well\n\n  //remove the below after using Mobx\n  // function handleSelectActivity(id: string) {\n  //   setSelectedActivity(activities.find(x => x.id === id));\n  // }\n  // function handleCancelSelectedActivity() {\n  //   setSelectedActivity(undefined);\n  // }\n  // //edit mode \n  // //id? --> optional parameter\n  // function handleFormOpen(id?: string) {\n  //   id ? handleSelectActivity(id) : handleCancelSelectedActivity();\n  //   setEditMode(true);\n  // }\n  // function handleFormClose() {\n  //   setEditMode(false);\n  // }\n\n  //remove create or edit from here after using Mobx\n  // function handleCreateOreditActivity(activity: Activity) {\n  //   /*//check if we have activity id:yes means update, no means create\n  //   activity.id ?\n  //     //[...activities.filter(x => x.id !== activity.id), activity] removing the activity from the activities list and add \n  //     //the update activity\n  //     setActivities([...activities.filter(x => x.id !== activity.id), activity])\n  //     //{...activity,id:uuid()}} --> get all the property inside activity and the id of the new created activity set it with a new uuid\n  //     : setActivities([...activities, { ...activity, id: uuid() }]);\n  //   setEditMode(false);\n  //   //displaying the new activity\n  //   setSelectedActivity(activity);*/\n\n  //   //Section 6 - posting datat to the server\n  //   setSubmitting(true);\n  //   if (activity.id) {\n  //     agent.Activities.update(activity).then(() => {\n  //       setActivities([...activities.filter(x => x.id !== activity.id), activity])\n  //       setSelectedActivity(activity);\n  //       setEditMode(false);\n  //       setSubmitting(false);\n  //     })\n  //   }\n  //   else {\n  //     activity.id = uuid();\n  //     agent.Activities.create(activity).then(() => {\n  //       setActivities([...activities, activity]);\n  //       setSelectedActivity(activity);\n  //       setEditMode(false);\n  //       setSubmitting(false);\n  //     })\n  //   }\n  // }\n\n  //remove delete from here after using Mobx\n  // function handleDeleteActivity(id: string) {\n  //   //delete activity on the server\n  //   setSubmitting(true);\n  //   agent.Activities.delete(id).then(() => {\n  //     setActivities([...activities.filter(x => x.id !== id)]);\n  //     setSubmitting(false);\n  //   })\n  // }\n\n  //check if we are loading before returning the jsx in the below return.\n  //if (loading) return <LoadingComponent content='loading app' />\n\n  //3\n  //if (activityStore.loadingInitial) return <LoadingComponent content='loading app' />\n\n  const location = useLocation();\n  //Persisting token\n  const { commonStore, userStore } = useStore();\n  //use effect to do something when this component loads.\n  useEffect(() => {\n    if (commonStore.token) {\n      userStore.getUser().finally(() => commonStore.setAppLoaded());\n    }\n    else {\n      //commonStore.setAppLoaded();\n      //270\n      userStore.getFacebookLoginStatus().then(()=>commonStore.setAppLoaded());\n    }\n  }, [commonStore, userStore])\n  //Add loading flag\n  if (!commonStore.appLoaded) return <LoadingComponent content='Loading app...' />\n\n  return (\n    <>\n      {/* //the below lines looks like html but they are not, they are jsx(JavaScript XML)\n    // <div className=\"App\">\n\n    //we will using fragment instead of a div to avoid rendering an empty div,and the reason we need somethign here\n    //div or fragment is that it is not allowed to return two different elemnts inside the react component,NavBar\n    //is an element and Container is an element, we can only add single element and have as many childs as we want \n    //inside it,we are not allowed to return two seperate elements at the same element so we need to add a div or fragment.\n    //also a shorthand for <fragment> is empty tag <> and </>\n    // <div> \n    // <Fragment> */}\n      {/*removeing the below header and replace it with */}\n      {/* <Header as='h2' icon='users' content='Reactivities'/> */}\n      {/* <NavBar openForm={handleFormOpen} /> */}\n\n      {/* <NavBar/> */}\n      {/* <Container style={{ marginTop: '7em' }}> */}\n      {/* </List> */}\n\n      {/*Remove the below two lines after Refactoring the app to use MobX*/}\n      {/* <h2>{activityStore.title}</h2>\n        <Button content='Add exclamation!' positive onClick={activityStore.setTitle}/> */}\n\n\n      {/*\n        Removing below after adding routers\n         <ActivityDashboard\n\n          //we sepecifiying activities property to pass activities list into ActivityDashboard\n          // activities={activityStore.activities}\n          // // createOrEdit={handleCreateOreditActivity}\n          // // deleteActivity={handleDeleteActivity}\n          // submitting={submitting}\n          /> \n        */}\n      {/*React Router will return any component that match the path,so '/' will return homepage component\n        '/' activities wil return homepage and activities components, so we need to add exact for homepage route\n        */}\n      {/* <Route exact path='/' component={HomePage}/> */}\n      {/* <Route exact path='/activities' component={ActivityDashboard}/> */}\n      {/* <Route path='/activities/:id' component={ActivityDetails}/> */}\n      {/* <Route path='/createActivity' component={ActivityForm}/> */}\n      {/* <Route key={location.key} path={['/createActivity','/manage/:id']} component={ActivityForm}/> */}\n      {/* </Container> */}\n      {/* </div> */}\n      {/* </Fragment> */}\n\n      {/*Adding react tostify component*/}\n      <ToastContainer position='bottom-right' hideProgressBar />\n      <ModalContainer/>\n      {/* Moving hoem page outside the nav bar */}\n      <Route exact path='/' component={HomePage} />\n      <Route\n        path={'/(.+)'}\n        render={() => (\n          <>\n            <NavBar />\n            <Container style={{ marginTop: '7em' }}>\n              <Switch>\n                {/*modified 253*/}\n                <PrivateRoute exact path='/activities' component={ActivityDashboard} />\n                <PrivateRoute path='/activities/:id' component={ActivityDetails} />\n                {/* <Route path='/createActivity' component={ActivityForm} /> */}\n                <PrivateRoute key={location.key} path={['/createActivity', '/manage/:id']} component={ActivityForm} />\n                <PrivateRoute path='/profiles/:username' component={ProfilePage} />\n                <Route path='/errors' component={TestErrors} />\n                <Route path='/server-error' component={ServerError} />\n                {/* <Route path='/login' component={LoginForm} /> */}\n                <Route component={NotFound} />\n              </Switch>\n\n            </Container>\n          </>\n        )}\n      />\n    </>\n\n  );\n}\n\n//export default App;\n//to be able to observe our observable in App\nexport default observer(App);\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","//252\r\n//this code copied from https://v5.reactrouter.com/web/guides/scroll-restoration\r\nimport { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nexport default function ScrollToTop() {\r\n  const { pathname } = useLocation();\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, [pathname]);\r\n\r\n  return null;\r\n}","import ReactDOM from 'react-dom'; //web version of the react\nimport 'semantic-ui-css/semantic.min.css';\nimport 'react-calendar/dist/Calendar.css';\nimport 'react-toastify/dist/ReactToastify.min.css'\nimport 'react-datepicker/dist/react-datepicker.css';\nimport './app/layout/styles.css';\nimport App from './app/layout/App';\nimport reportWebVitals from './reportWebVitals';\nimport { store, StoreContext } from './app/stores/store';\nimport { Router } from 'react-router-dom';\nimport { createBrowserHistory } from 'history';\nimport ScrollToTop from './app/layout/ScrollToTop';\n\nexport const history = createBrowserHistory();\n\nReactDOM.render(\n  <StoreContext.Provider value={store}>\n    {/*put our app isnide the router*/}\n    {/* <BrowserRouter>\n      <App />\n    </BrowserRouter> */}\n    <Router history={history}>\n      {/*252*/}\n      <ScrollToTop />\n      <App />\n    </Router>\n  </StoreContext.Provider>,\n\n  document.getElementById('root')//inside this div root will going our react application that is inside .<React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}